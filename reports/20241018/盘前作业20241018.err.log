Traceback (most recent call last):
  File "/Users/mac/anaconda3/lib/python3.11/site-packages/jupyter_cache/executors/utils.py", line 58, in single_nb_execution
    executenb(
  File "/Users/mac/anaconda3/lib/python3.11/site-packages/nbclient/client.py", line 1305, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/anaconda3/lib/python3.11/site-packages/jupyter_core/utils/__init__.py", line 173, in wrapped
    return loop.run_until_complete(inner)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mac/anaconda3/lib/python3.11/asyncio/base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/Users/mac/anaconda3/lib/python3.11/site-packages/nbclient/client.py", line 705, in async_execute
    await self.async_execute_cell(
  File "/Users/mac/anaconda3/lib/python3.11/site-packages/nbclient/client.py", line 1058, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/Users/mac/anaconda3/lib/python3.11/site-packages/nbclient/client.py", line 914, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
import numpy as np
import matplotlib.pyplot as plt

#è®¢å•ç°¿åˆ†æž
def orderBook(stocksymb,start_time,end_time):
    
    openAuctionDf= ak.stock_bid_ask_em(symbol=stocksymb)
    df1_subset = openAuctionDf.head(20)

    # å¤„ç†å¥‡æ•°è¡Œçš„ value åˆ—ï¼Œä¿ç•™å°æ•°ç‚¹åŽäºŒä½ï¼Œå¹¶ä»¥ .2f å½¢å¼æ˜¾ç¤º
    prices = df1_subset.iloc[::2]['value'].apply(lambda x: f'{x:.2f}').tolist()

    # å¤„ç†å¶æ•°è¡Œçš„ value åˆ—ï¼Œå–å¹³å‡å€¼çš„ç§‘å­¦è®¡æ•°æ³•çš„ 10 çš„ x æ¬¡æ–¹
    volumes = df1_subset.iloc[1::2]['value'].apply(lambda x: f'{x:.1e}').tolist()

    # åˆ›å»ºæ–°çš„ df2
    df2 = pd.DataFrame({'price': prices, 'volume': volumes})
    
    # å°† volume åˆ—è½¬æ¢ä¸ºæµ®ç‚¹åž‹ä»¥ä¾¿è®¡ç®—å’Œç»˜å›¾
    df2['volume'] = df2['volume'].astype(float)
    df2['price'] = df2['price'].astype(float)

    # èŽ·å– df1 ç¬¬ 21 è¡Œçš„ value åˆ—å€¼
    latest_price = openAuctionDf.loc[20, 'value']
    sell1price=df2.loc[4,'price']
    selllag=sell1price-latest_price
    buy1price=df2.loc[5,'price']
    buylag=latest_price-buy1price
    if selllag==0:
        msg='æˆäº¤åœ¨â€œå–ä¸€â€ä»·ï¼Œ'
    elif buylag==0:
        msg='æˆäº¤åœ¨â€œä¹°ä¸€â€ä»·ï¼Œ'
    elif selllag>buylag:
        msg='æˆäº¤æŽ¥è¿‘â€œä¹°ä¸€â€ä»·ï¼Œ'
    elif buylag>selllag:
        msg='æˆäº¤æŽ¥è¿‘â€œå–ä¸€â€ä»·ï¼Œ'
    else:
        msg='æˆäº¤åœ¨â€œä¹°ä¸€â€ã€â€œå–ä¸€â€çš„ä¸­é—´ä»·ï¼Œ'
    print(f"{msg}æœ€æ–°æˆäº¤ä»·: {latest_price}")
    #???df2.to_csv(f'{}')
    print(df2)

    # ç»˜åˆ¶æ°´å¹³æ¡å½¢å›¾
    fig, ax = plt.subplots(figsize=(10, 6))

    # ç”Ÿæˆæ¡å½¢å›¾
    bars = ax.barh(y=df2['price'],width=df2['volume'],height=0.005, color='blue', align='center')
    bars[4].set_color('red')  # ç¬¬ 5 è¡Œæ ‡æ³¨ä¸ºçº¢è‰²
    bars[5].set_color('red')  # ç¬¬ 6 è¡Œæ ‡æ³¨ä¸ºçº¢è‰²
    
    for bar in bars:
        width = bar.get_width()
        ax.text(width, bar.get_y() + bar.get_height() / 2, f'{width:.1e}', va='center', ha='left', fontsize=10, color='black')

    # æ·»åŠ æ ‡ç­¾
    ax.set_xlabel('Volume')
    ax.set_ylabel('Price')
    ax.set_title('Order Book')
    
    # æ˜¾ç¤ºå›¾è¡¨
    plt.show()

orderBook(stocksymb)
------------------


[0;31m---------------------------------------------------------------------------[0m
[0;31mTypeError[0m                                 Traceback (most recent call last)
Cell [0;32mIn[30], line 63[0m
[1;32m     60[0m     [38;5;66;03m# æ˜¾ç¤ºå›¾è¡¨[39;00m
[1;32m     61[0m     plt[38;5;241m.[39mshow()
[0;32m---> 63[0m orderBook(stocksymb)

[0;31mTypeError[0m: orderBook() missing 2 required positional arguments: 'start_time' and 'end_time'

