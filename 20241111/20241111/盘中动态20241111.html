
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>盘中动态:20241111 &#8212; A股每日概览 A Share Daily Brief</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = '20241111/20241111/盘中动态20241111';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo2.png" class="logo__image only-light" alt="A股每日概览 A Share Daily Brief - Home"/>
    <script>document.write(`<img src="../../_static/logo2.png" class="logo__image only-dark" alt="A股每日概览 A Share Daily Brief - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../intro.html">
                    A股每日概览
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">20240925</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20240925/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20240925.html">概览(Brief):20240925</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20240926</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20240926/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20240926.html">概览(Brief):20240926</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20240927</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20240927/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20240927.html">概览(Brief):20240927</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241008</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241008/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241008.html">概览(Brief):20241008</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241009</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241009/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241009.html">概览(Brief):20241009</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241010</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241010/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241010.html">概览(Brief):20241010</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241011</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241011/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241011.html">概览(Brief):20241011</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241014</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241014/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241014.html">概览(Brief):20241014</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241015</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241015/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241015.html">概览(Brief):20241015</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241016</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241016/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241016.html">概览(Brief):20241016</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241017</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241017/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241017.html">概览(Brief):20241017</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241018</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241018/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241018.html">概览(Brief):20241018</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241021</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241021/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241021.html">概览(Brief):20241021</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241022</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241022/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241022.html">概览(Brief):20241022</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241024</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241024/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241024.html">概览(Brief):20241024</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241025</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241025/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241025.html">概览(Brief):20241025</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241028</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241028/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241028.html">概览(Brief):20241028</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241029</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241029/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241029.html">概览(Brief):20241029</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241030</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241030/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241030.html">概览(Brief):20241030</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241031</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241031/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241031.html">概览(Brief):20241031</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241101</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241101/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241101.html">概览(Brief):20241101</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241104</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241104/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241104.html">概览(Brief):20241104</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241105</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241105/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241105.html">概览(Brief):20241105</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241106</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241106/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241106.html">概览(Brief):20241106</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241107</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241107/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241107.html">概览(Brief):20241107</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241108</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241108/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241108.html">概览(Brief):20241108</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241111</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241111.html">盘前作业(Pre-market Work):20241108</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E7%9B%98%E4%B8%AD%E5%8A%A8%E6%80%8120241111.html">盘中动态:20241108</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241112</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241112/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241112.html">盘前作业(Pre-market Work):20241112</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../20241112/%E7%9B%98%E4%B8%AD%E5%8A%A8%E6%80%8120241112.html">盘中动态:20241112</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241115</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241115/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241115.html">盘前作业(Pre-market Work):20241115</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../20241115/%E7%9B%98%E4%B8%AD%E5%8A%A8%E6%80%8120241115.html">盘中动态:20241115</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241118</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241118/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241118.html">盘前作业(Pre-market Work):20241118</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../20241118/%E7%9B%98%E4%B8%AD%E5%8A%A8%E6%80%8120241118.html">盘中动态:20241118</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241119</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241119/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241119.html">盘前作业(Pre-market Work):20241119</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../20241119/%E7%9B%98%E4%B8%AD%E5%8A%A8%E6%80%8120241119.html">盘中动态:20241119</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241120</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241120/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241120.html">盘前作业(Pre-market Work):20241120</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../20241120/%E7%9B%98%E4%B8%AD%E5%8A%A8%E6%80%8120241120.html">盘中动态:20241120</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241121</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241121/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241121.html">盘前作业(Pre-market Work):20241121</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../20241121/%E7%9B%98%E4%B8%AD%E5%8A%A8%E6%80%8120241121.html">盘中动态:20241121</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241122</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241122/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241122.html">盘前作业(Pre-market Work):20241122</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../20241122/%E7%9B%98%E4%B8%AD%E5%8A%A8%E6%80%8120241122.html">盘中动态:20241122</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241125</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241125/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241125.html">盘前作业(Pre-market Work):20241125</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../20241125/%E7%9B%98%E4%B8%AD%E5%8A%A8%E6%80%8120241125.html">盘中动态:20241125</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241126</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241126/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241126.html">盘前作业(Pre-market Work):20241126</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../20241126/%E7%9B%98%E4%B8%AD%E5%8A%A8%E6%80%8120241126.html">盘中动态:20241126</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">20241127</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../20241127/%E7%9B%98%E5%89%8D%E4%BD%9C%E4%B8%9A20241127.html">盘前作业(Pre-market Work):20241126</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/Ugpoor/AShareDailyBrief" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Ugpoor/AShareDailyBrief/issues/new?title=Issue%20on%20page%20%2F20241111/20241111/盘中动态20241111.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/20241111/20241111/盘中动态20241111.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>盘中动态:20241111</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">1. 今日板块热点</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">2.2.1 集合竞价概念板块排名</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">2.2.3 开盘后15分钟概念板块排名</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">2.2.3 集合竞价行业板块涨跌幅</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">2.2.4 开盘15分钟行业板块涨跌幅</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">2.2.5 集合竞价阶段涨停个股热点明细</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">2.2.6 开盘15分钟涨停个股热点明细</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">2.2.7 板块动态评析</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">4.个股市场</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">4.1 跟进股票列表</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#k">4.1.1 历史K线</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">4.1.2 盘口信息汇总</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">4.1.2.1 成交和挂单明细</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">4.1.3 个股追踪</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1>盘中动态:20241111<a class="headerlink" href="#id1" title="Link to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">nbimporter</span>
<span class="kn">from</span> <span class="nn">盘前作业20241111</span> <span class="kn">import</span> <span class="n">plotStock</span>

<span class="n">repday</span><span class="o">=</span><span class="s1">&#39;20241111&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>定时器</p>
<section id="id2">
<h2>1. 今日板块热点<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<p><img alt="今日涨幅国泰君安APP" src="20241111/20241111/gtja.png" /></p>
<p>定时任务运行器：集合竞价和开盘前30分钟</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">akshare</span> <span class="k">as</span> <span class="nn">ak</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">symbol</span><span class="o">=</span><span class="s1">&#39;600839&#39;</span>

<span class="c1"># 获取股票数据</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">ak</span><span class="o">.</span><span class="n">stock_bid_ask_em</span><span class="p">(</span><span class="n">symbol</span><span class="o">=</span><span class="n">symbol</span><span class="p">)</span>

<span class="c1"># 转换为字典</span>
<span class="n">data_dict</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;item&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_dict</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;sell_5&#39;: 11.25,
 &#39;sell_5_vol&#39;: 817600.0,
 &#39;sell_4&#39;: 11.24,
 &#39;sell_4_vol&#39;: 250100.0,
 &#39;sell_3&#39;: 11.23,
 &#39;sell_3_vol&#39;: 445000.0,
 &#39;sell_2&#39;: 11.22,
 &#39;sell_2_vol&#39;: 733300.0,
 &#39;sell_1&#39;: 11.21,
 &#39;sell_1_vol&#39;: 2012900.0,
 &#39;buy_1&#39;: 11.2,
 &#39;buy_1_vol&#39;: 3182500.0,
 &#39;buy_2&#39;: 11.19,
 &#39;buy_2_vol&#39;: 611600.0,
 &#39;buy_3&#39;: 11.18,
 &#39;buy_3_vol&#39;: 563000.0,
 &#39;buy_4&#39;: 11.17,
 &#39;buy_4_vol&#39;: 165400.0,
 &#39;buy_5&#39;: 11.16,
 &#39;buy_5_vol&#39;: 351100.0,
 &#39;最新&#39;: 11.2,
 &#39;均价&#39;: 10.9,
 &#39;涨幅&#39;: 1.91,
 &#39;涨跌&#39;: 0.21,
 &#39;总手&#39;: 4387415.0,
 &#39;金额&#39;: 4782410709.0,
 &#39;换手&#39;: 9.51,
 &#39;量比&#39;: 0.65,
 &#39;最高&#39;: 11.3,
 &#39;最低&#39;: 10.58,
 &#39;今开&#39;: 10.81,
 &#39;昨收&#39;: 10.99,
 &#39;涨停&#39;: 12.09,
 &#39;跌停&#39;: 9.89,
 &#39;外盘&#39;: 2228641.0,
 &#39;内盘&#39;: 2158775.0}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span>

<span class="c1"># 股票代码列表</span>
<span class="n">symbols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;stock_code1&quot;</span><span class="p">,</span> <span class="s2">&quot;stock_code2&quot;</span><span class="p">,</span> <span class="s2">&quot;stock_code3&quot;</span><span class="p">]</span>  <span class="c1"># 替换为实际股票代码</span>

<span class="k">def</span> <span class="nf">is_within_trading_hours</span><span class="p">(</span><span class="n">current_time</span><span class="p">):</span>
    <span class="c1"># 定义交易时间段</span>
    <span class="n">morning_start</span> <span class="o">=</span> <span class="n">current_time</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">morning_end</span> <span class="o">=</span> <span class="n">current_time</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">afternoon_start</span> <span class="o">=</span> <span class="n">current_time</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">afternoon_end</span> <span class="o">=</span> <span class="n">current_time</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="p">(</span><span class="n">morning_start</span> <span class="o">&lt;=</span> <span class="n">current_time</span> <span class="o">&lt;=</span> <span class="n">morning_end</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">afternoon_start</span> <span class="o">&lt;=</span> <span class="n">current_time</span> <span class="o">&lt;=</span> <span class="n">afternoon_end</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">fetch_and_store</span><span class="p">(</span><span class="n">symbol</span><span class="p">):</span>
    <span class="c1"># 获取当前时间</span>
    <span class="n">current_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">current_time</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">is_within_trading_hours</span><span class="p">(</span><span class="n">current_time</span><span class="p">):</span>
        <span class="c1"># 获取股票数据</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">ak</span><span class="o">.</span><span class="n">stock_bid_ask_em</span><span class="p">(</span><span class="n">symbol</span><span class="o">=</span><span class="n">symbol</span><span class="p">)</span>

        <span class="c1"># 转换为字典</span>
        <span class="n">data_dict</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;item&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>

        <span class="c1"># 添加时间戳和股票代码到数据字典</span>
        <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">current_time</span>
        <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;sym&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">symbol</span>

        <span class="c1"># 转换数据为 DataFrame</span>
        <span class="n">transformed_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">data_dict</span><span class="p">])</span>

        <span class="c1"># 将数据插入到 DolphinDB</span>
        <span class="n">s</span><span class="o">.</span><span class="n">upload</span><span class="p">({</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">transformed_df</span><span class="p">})</span>
        <span class="n">s</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        append!(loadTable(&quot;dfs://Quote&quot;, &quot;t&quot;), data)</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">)</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="c1"># 使用多线程获取多个股票代码的数据</span>
    <span class="k">with</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">symbols</span><span class="p">))</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
        <span class="n">executor</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">fetch_and_store</span><span class="p">,</span> <span class="n">symbols</span><span class="p">)</span>

    <span class="c1"># 每3秒检查一次</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">line</span> <span class="mi">42</span>
<span class="g g-Whitespace">     </span><span class="mi">36</span>         <span class="n">s</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">     </span><span class="mi">37</span><span class="s2">         append!(loadTable(&quot;dfs://Quote&quot;, &quot;t&quot;), data)</span>
<span class="g g-Whitespace">     </span><span class="mi">38</span><span class="s2">         &quot;&quot;&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">40</span> <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">41</span>     <span class="c1"># 使用多线程获取多个股票代码的数据</span>
<span class="ne">---&gt; </span><span class="mi">42</span>     <span class="k">with</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">symbols</span><span class="p">))</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">43</span>         <span class="n">executor</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">fetch_and_store</span><span class="p">,</span> <span class="n">symbols</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">45</span>     <span class="c1"># 每3秒检查一次</span>

<span class="ne">NameError</span>: name &#39;ThreadPoolExecutor&#39; is not defined
</pre></div>
</div>
</div>
</div>
<section id="id3">
<h3>2.2.1 集合竞价概念板块排名<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1">#记录排名</span>
<span class="c1"># basename: 板块类型（概念板块、行业板块）</span>
<span class="c1"># start_time, end_time: 排名时间段</span>
<span class="c1"># sector: 板块名称</span>
<span class="k">def</span> <span class="nf">recordRank</span><span class="p">(</span><span class="n">basename</span><span class="p">,</span><span class="n">start_time</span><span class="p">,</span><span class="n">end_time</span><span class="p">):</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">tStr</span> <span class="o">=</span> <span class="n">end_time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">%H%M&quot;</span><span class="p">)</span>
    <span class="n">csvfile</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">basename</span><span class="si">}{</span><span class="n">tStr</span><span class="si">}</span><span class="s1">.txt&#39;</span>
    <span class="k">if</span> <span class="n">now</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">end_time</span> <span class="ow">and</span> <span class="n">now</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="n">start_time</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">basename</span><span class="o">==</span><span class="s1">&#39;conceptRank&#39;</span><span class="p">:</span>
            <span class="n">rank</span><span class="o">=</span><span class="n">ak</span><span class="o">.</span><span class="n">stock_board_concept_name_em</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">basename</span><span class="o">==</span><span class="s1">&#39;industryRank&#39;</span><span class="p">:</span>
            <span class="n">rank</span><span class="o">=</span><span class="n">ak</span><span class="o">.</span><span class="n">stock_board_industry_name_em</span><span class="p">()</span>
        <span class="n">rank</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">csvfile</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">csvfile</span><span class="p">):</span>
            <span class="n">rank</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">csvfile</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;非指定时间段，没有数据源.&#39;</span><span class="p">)</span>
            <span class="n">rank</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">rank</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="n">mvtotal</span><span class="o">=</span><span class="n">rank</span><span class="p">[</span><span class="s1">&#39;总市值&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">rank</span><span class="p">[</span><span class="s1">&#39;市值比&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">rank</span><span class="p">[</span><span class="s1">&#39;总市值&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">mvtotal</span>
        <span class="n">rank</span><span class="p">[</span><span class="s1">&#39;上涨家数%&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">rank</span><span class="p">[</span><span class="s1">&#39;上涨家数&#39;</span><span class="p">]</span><span class="o">/</span><span class="p">(</span><span class="n">rank</span><span class="p">[</span><span class="s1">&#39;上涨家数&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">rank</span><span class="p">[</span><span class="s1">&#39;下跌家数&#39;</span><span class="p">])</span>
        <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;排名&#39;</span><span class="p">,</span><span class="s1">&#39;板块名称&#39;</span><span class="p">,</span><span class="s1">&#39;板块代码&#39;</span><span class="p">,</span><span class="s1">&#39;涨跌幅&#39;</span><span class="p">,</span><span class="s1">&#39;市值比&#39;</span><span class="p">,</span><span class="s1">&#39;换手率&#39;</span><span class="p">,</span><span class="s1">&#39;上涨家数%&#39;</span><span class="p">,</span><span class="s1">&#39;领涨股票&#39;</span><span class="p">,</span><span class="s1">&#39;领涨股票-涨跌幅&#39;</span><span class="p">]</span>
        <span class="n">rank</span><span class="o">=</span><span class="n">rank</span><span class="p">[</span><span class="n">columns</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">rank</span>

<span class="c1">#排名靠前的板块的股票明细排名</span>
<span class="c1"># sectorRankDf: 板块排名DataFrame(recordRank生成)</span>
<span class="c1"># sectorNum,stockNum: 返回板块数、股票数</span>
<span class="k">def</span> <span class="nf">top5sectorStocks</span><span class="p">(</span><span class="n">basename</span><span class="p">,</span><span class="n">start_time</span><span class="p">,</span><span class="n">end_time</span><span class="p">,</span><span class="n">sectorRankDf</span><span class="p">,</span><span class="n">sectorNum</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">stockNum</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">top5</span><span class="o">=</span><span class="p">{}</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">tStr</span> <span class="o">=</span> <span class="n">start_time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">%H%M&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">sectorRankDf</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;非指定时间段，没有数据源。&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;排名前5领涨板块成分股列表。&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">sym</span> <span class="ow">in</span> <span class="n">sectorRankDf</span><span class="p">[</span><span class="s1">&#39;板块名称&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()[:</span><span class="mi">5</span><span class="p">]:</span>
            <span class="n">csvfile</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">basename</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">sym</span><span class="si">}{</span><span class="n">tStr</span><span class="si">}</span><span class="s1">.txt&#39;</span>
            <span class="k">if</span> <span class="n">now</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">end_time</span> <span class="ow">and</span> <span class="n">now</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="n">start_time</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">basename</span><span class="o">==</span><span class="s1">&#39;conceptRank&#39;</span><span class="p">:</span>
                    <span class="n">top5</span><span class="p">[</span><span class="n">sym</span><span class="p">]</span><span class="o">=</span><span class="n">ak</span><span class="o">.</span><span class="n">stock_board_concept_cons_em</span><span class="p">(</span><span class="n">sym</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">top5</span><span class="p">[</span><span class="n">sym</span><span class="p">]</span><span class="o">=</span><span class="n">ak</span><span class="o">.</span><span class="n">stock_board_industry_cons_em</span><span class="p">(</span><span class="n">sym</span><span class="p">)</span>
                <span class="n">top5</span><span class="p">[</span><span class="n">sym</span><span class="p">]</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">csvfile</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">csvfile</span><span class="p">):</span>
                    <span class="n">top5</span><span class="p">[</span><span class="n">sym</span><span class="p">]</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">csvfile</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No record stored and not available from source.&#39;</span><span class="p">)</span>
                    <span class="n">top5</span><span class="p">[</span><span class="n">sym</span><span class="p">]</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">top5</span><span class="p">[</span><span class="n">sym</span><span class="p">]</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
                <span class="n">atotal</span><span class="o">=</span><span class="n">top5</span><span class="p">[</span><span class="n">sym</span><span class="p">][</span><span class="s1">&#39;成交额&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
                <span class="n">top5</span><span class="p">[</span><span class="n">sym</span><span class="p">][</span><span class="s1">&#39;成交额比&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">top5</span><span class="p">[</span><span class="n">sym</span><span class="p">][</span><span class="s1">&#39;成交额&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">atotal</span>
                <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;代码&#39;</span><span class="p">,</span><span class="s1">&#39;名称&#39;</span><span class="p">,</span><span class="s1">&#39;涨跌幅&#39;</span><span class="p">,</span><span class="s1">&#39;成交额&#39;</span><span class="p">,</span><span class="s1">&#39;换手率&#39;</span><span class="p">,</span><span class="s1">&#39;市盈率-动态&#39;</span><span class="p">,</span><span class="s1">&#39;市净率&#39;</span><span class="p">]</span>
                <span class="n">top5</span><span class="p">[</span><span class="n">sym</span><span class="p">]</span><span class="o">=</span><span class="n">top5</span><span class="p">[</span><span class="n">sym</span><span class="p">][</span><span class="n">columns</span><span class="p">][:</span><span class="n">stockNum</span><span class="p">]</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;板块：</span><span class="si">{</span><span class="n">sym</span><span class="si">}</span><span class="s1">:</span><span class="se">\n</span><span class="si">{</span><span class="n">top5</span><span class="p">[</span><span class="n">sym</span><span class="p">]</span><span class="si">}</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">top5</span>   
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#当天集合竞价阶段概念板块排名</span>
<span class="n">basename</span><span class="o">=</span><span class="s1">&#39;conceptRank&#39;</span>
<span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">end_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
<span class="n">rank0</span><span class="o">=</span><span class="n">recordRank</span><span class="p">(</span><span class="n">basename</span><span class="p">,</span><span class="n">start_time</span><span class="p">,</span><span class="n">end_time</span><span class="p">)</span>
<span class="n">rank0</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>排名</th>
      <th>板块名称</th>
      <th>板块代码</th>
      <th>涨跌幅</th>
      <th>市值比</th>
      <th>换手率</th>
      <th>上涨家数%</th>
      <th>领涨股票</th>
      <th>领涨股票-涨跌幅</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>昨日涨停_含一字</td>
      <td>BK1050</td>
      <td>5.36</td>
      <td>0.001210</td>
      <td>0.0</td>
      <td>0.896552</td>
      <td>科创新材</td>
      <td>20.27</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>昨日涨停</td>
      <td>BK0815</td>
      <td>4.99</td>
      <td>0.001051</td>
      <td>0.0</td>
      <td>0.876033</td>
      <td>科创新材</td>
      <td>20.27</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>昨日连板_含一字</td>
      <td>BK1051</td>
      <td>4.27</td>
      <td>0.000385</td>
      <td>0.0</td>
      <td>0.850000</td>
      <td>西部创业</td>
      <td>10.06</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>高带宽内存</td>
      <td>BK1152</td>
      <td>3.98</td>
      <td>0.000089</td>
      <td>0.0</td>
      <td>1.000000</td>
      <td>国芯科技</td>
      <td>20.01</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>昨日连板</td>
      <td>BK0816</td>
      <td>3.71</td>
      <td>0.000260</td>
      <td>0.0</td>
      <td>0.837838</td>
      <td>动力新科</td>
      <td>10.04</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>Chiplet概念</td>
      <td>BK1101</td>
      <td>2.99</td>
      <td>0.000366</td>
      <td>0.0</td>
      <td>0.880000</td>
      <td>润欣科技</td>
      <td>20.01</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>华为欧拉</td>
      <td>BK1013</td>
      <td>2.88</td>
      <td>0.000230</td>
      <td>0.0</td>
      <td>0.733333</td>
      <td>东方通</td>
      <td>15.00</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>3D玻璃</td>
      <td>BK0881</td>
      <td>2.13</td>
      <td>0.000180</td>
      <td>0.0</td>
      <td>0.647059</td>
      <td>福能东方</td>
      <td>19.97</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>EDA概念</td>
      <td>BK0946</td>
      <td>2.12</td>
      <td>0.000169</td>
      <td>0.0</td>
      <td>0.846154</td>
      <td>华大九天</td>
      <td>12.34</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>北斗导航</td>
      <td>BK0629</td>
      <td>1.93</td>
      <td>0.000655</td>
      <td>0.0</td>
      <td>0.808824</td>
      <td>杰创智能</td>
      <td>14.46</td>
    </tr>
    <tr>
      <th>10</th>
      <td>11</td>
      <td>天基互联</td>
      <td>BK0921</td>
      <td>1.89</td>
      <td>0.000374</td>
      <td>0.0</td>
      <td>0.861111</td>
      <td>中国卫通</td>
      <td>9.98</td>
    </tr>
    <tr>
      <th>11</th>
      <td>12</td>
      <td>汽车芯片</td>
      <td>BK0969</td>
      <td>1.78</td>
      <td>0.000626</td>
      <td>0.0</td>
      <td>0.767442</td>
      <td>润欣科技</td>
      <td>20.01</td>
    </tr>
    <tr>
      <th>12</th>
      <td>13</td>
      <td>存储芯片</td>
      <td>BK1137</td>
      <td>1.75</td>
      <td>0.000622</td>
      <td>0.0</td>
      <td>0.836735</td>
      <td>国芯科技</td>
      <td>20.01</td>
    </tr>
    <tr>
      <th>13</th>
      <td>14</td>
      <td>光刻机(胶)</td>
      <td>BK0884</td>
      <td>1.66</td>
      <td>0.000544</td>
      <td>0.0</td>
      <td>0.760000</td>
      <td>东方嘉盛</td>
      <td>10.01</td>
    </tr>
    <tr>
      <th>14</th>
      <td>15</td>
      <td>中芯概念</td>
      <td>BK0935</td>
      <td>1.64</td>
      <td>0.001540</td>
      <td>0.0</td>
      <td>0.821429</td>
      <td>有研新材</td>
      <td>9.99</td>
    </tr>
    <tr>
      <th>15</th>
      <td>16</td>
      <td>时空大数据</td>
      <td>BK1130</td>
      <td>1.49</td>
      <td>0.000100</td>
      <td>0.0</td>
      <td>0.700000</td>
      <td>中电兴发</td>
      <td>10.09</td>
    </tr>
    <tr>
      <th>16</th>
      <td>17</td>
      <td>商业航天</td>
      <td>BK0963</td>
      <td>1.32</td>
      <td>0.001034</td>
      <td>0.0</td>
      <td>0.755725</td>
      <td>亚信安全</td>
      <td>15.66</td>
    </tr>
    <tr>
      <th>17</th>
      <td>18</td>
      <td>AI芯片</td>
      <td>BK1127</td>
      <td>1.28</td>
      <td>0.000679</td>
      <td>0.0</td>
      <td>0.666667</td>
      <td>国芯科技</td>
      <td>20.01</td>
    </tr>
    <tr>
      <th>18</th>
      <td>19</td>
      <td>毫米波概念</td>
      <td>BK1124</td>
      <td>1.22</td>
      <td>0.000294</td>
      <td>0.0</td>
      <td>0.657143</td>
      <td>创远信科</td>
      <td>11.84</td>
    </tr>
    <tr>
      <th>19</th>
      <td>20</td>
      <td>3D摄像头</td>
      <td>BK0901</td>
      <td>1.21</td>
      <td>0.000361</td>
      <td>0.0</td>
      <td>0.777778</td>
      <td>*ST合泰</td>
      <td>5.13</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">top5_concept_stocks</span><span class="o">=</span><span class="n">top5sectorStocks</span><span class="p">(</span><span class="n">basename</span><span class="p">,</span><span class="n">start_time</span><span class="p">,</span><span class="n">end_time</span><span class="p">,</span><span class="n">rank0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>排名前5领涨板块成分股列表。
板块：昨日涨停_含一字:
       代码    名称    涨跌幅  成交额  换手率  市盈率-动态   市净率
0  688262  国芯科技  20.01  NaN  0.0  -66.25  5.00
1  688691  灿芯股份  19.99  NaN  0.0   85.61  6.80
2  300173  福能东方  19.97  NaN  0.0  572.26  5.68
3  833580  科创新材  19.05  NaN  0.0  161.29  5.11
4  300379   东方通  15.00  NaN  0.0  -52.50  3.67


板块：昨日涨停:
       代码    名称    涨跌幅  成交额  换手率  市盈率-动态   市净率
0  688262  国芯科技  20.01  NaN  0.0  -66.25  5.00
1  688691  灿芯股份  19.99  NaN  0.0   85.61  6.80
2  300173  福能东方  19.97  NaN  0.0  572.26  5.68
3  833580  科创新材  19.05  NaN  0.0  161.29  5.11
4  300379   东方通  15.00  NaN  0.0  -52.50  3.67


板块：昨日连板_含一字:
       代码    名称    涨跌幅  成交额  换手率  市盈率-动态    市净率
0     557  西部创业  10.06  NaN  0.0   33.62   1.65
1  600841  动力新科  10.04  NaN  0.0   -6.05   2.39
2  603366  日出东方  10.04  NaN  0.0   71.55   1.61
3     826  启迪环境  10.03  NaN  0.0   -3.06   1.56
4    2547  春兴精工  10.02  NaN  0.0  -25.23  89.67


板块：高带宽内存:
       代码    名称    涨跌幅  成交额  换手率  市盈率-动态    市净率
0  688262  国芯科技  20.01  NaN  0.0  -66.25   5.00
1  688535  华海诚科   6.23  NaN  0.0  155.98   7.05
2  838971  天马新材   6.20  NaN  0.0  137.74  10.58
3  603005  晶方科技   4.01  NaN  0.0   78.44   4.57
4    2409  雅克科技   3.06  NaN  0.0   33.08   4.55


板块：昨日连板:
       代码    名称    涨跌幅  成交额  换手率  市盈率-动态    市净率
0  600841  动力新科  10.04  NaN  0.0   -6.05   2.39
1     605  渤海股份  10.01  NaN  0.0  194.67   1.48
2  601828   美凯龙  10.00  NaN  0.0   -7.62   0.40
3  600536  中国软件  10.00  NaN  0.0 -136.52  28.29
4  600619  海立股份   9.99  NaN  0.0  725.93   3.60
</pre></div>
</div>
</div>
</div>
</section>
<section id="id4">
<h3>2.2.3 开盘后15分钟概念板块排名<a class="headerlink" href="#id4" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
<span class="n">end_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">52</span><span class="p">)</span>
<span class="n">rank1</span><span class="o">=</span><span class="n">recordRank</span><span class="p">(</span><span class="n">basename</span><span class="p">,</span><span class="n">start_time</span><span class="p">,</span><span class="n">end_time</span><span class="p">)</span>
<span class="n">rank1</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>排名</th>
      <th>板块名称</th>
      <th>板块代码</th>
      <th>涨跌幅</th>
      <th>市值比</th>
      <th>换手率</th>
      <th>上涨家数%</th>
      <th>领涨股票</th>
      <th>领涨股票-涨跌幅</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>毛发医疗</td>
      <td>BK0996</td>
      <td>3.05</td>
      <td>0.000062</td>
      <td>0.76</td>
      <td>1.000000</td>
      <td>国际医学</td>
      <td>10.07</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>昨日连板_含一字</td>
      <td>BK1051</td>
      <td>2.77</td>
      <td>0.000383</td>
      <td>3.27</td>
      <td>0.746032</td>
      <td>大港股份</td>
      <td>10.00</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>SPD概念</td>
      <td>BK1147</td>
      <td>2.56</td>
      <td>0.000048</td>
      <td>1.13</td>
      <td>1.000000</td>
      <td>华人健康</td>
      <td>4.82</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>3D摄像头</td>
      <td>BK0901</td>
      <td>2.53</td>
      <td>0.000367</td>
      <td>2.36</td>
      <td>0.727273</td>
      <td>晶方科技</td>
      <td>9.34</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>昨日涨停_含一字</td>
      <td>BK1050</td>
      <td>2.50</td>
      <td>0.001715</td>
      <td>3.06</td>
      <td>0.702830</td>
      <td>粤桂股份</td>
      <td>10.04</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>锂矿概念</td>
      <td>BK1173</td>
      <td>2.38</td>
      <td>0.001601</td>
      <td>0.88</td>
      <td>0.756757</td>
      <td>威领股份</td>
      <td>9.97</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>屏下摄像</td>
      <td>BK0947</td>
      <td>2.22</td>
      <td>0.000354</td>
      <td>1.03</td>
      <td>0.666667</td>
      <td>维信诺</td>
      <td>10.04</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>昨日连板</td>
      <td>BK0816</td>
      <td>2.20</td>
      <td>0.000227</td>
      <td>3.58</td>
      <td>0.743590</td>
      <td>大港股份</td>
      <td>10.00</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>昨日涨停</td>
      <td>BK0815</td>
      <td>2.18</td>
      <td>0.001512</td>
      <td>3.35</td>
      <td>0.693122</td>
      <td>粤桂股份</td>
      <td>10.04</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>ST股</td>
      <td>BK0511</td>
      <td>2.00</td>
      <td>0.000268</td>
      <td>0.71</td>
      <td>0.773109</td>
      <td>*ST中润</td>
      <td>4.95</td>
    </tr>
    <tr>
      <th>10</th>
      <td>11</td>
      <td>环氧丙烷</td>
      <td>BK1011</td>
      <td>1.99</td>
      <td>0.000219</td>
      <td>0.31</td>
      <td>0.615385</td>
      <td>红 宝 丽</td>
      <td>9.98</td>
    </tr>
    <tr>
      <th>11</th>
      <td>12</td>
      <td>注射器概念</td>
      <td>BK0973</td>
      <td>1.83</td>
      <td>0.000052</td>
      <td>1.14</td>
      <td>0.846154</td>
      <td>天华新能</td>
      <td>11.93</td>
    </tr>
    <tr>
      <th>12</th>
      <td>13</td>
      <td>超级品牌</td>
      <td>BK0811</td>
      <td>1.77</td>
      <td>0.005398</td>
      <td>0.45</td>
      <td>0.968750</td>
      <td>上汽集团</td>
      <td>6.36</td>
    </tr>
    <tr>
      <th>13</th>
      <td>14</td>
      <td>重组蛋白</td>
      <td>BK1063</td>
      <td>1.74</td>
      <td>0.000102</td>
      <td>0.49</td>
      <td>0.928571</td>
      <td>神州细胞-U</td>
      <td>7.59</td>
    </tr>
    <tr>
      <th>14</th>
      <td>15</td>
      <td>独家药品</td>
      <td>BK0676</td>
      <td>1.69</td>
      <td>0.000498</td>
      <td>0.77</td>
      <td>0.923077</td>
      <td>新里程</td>
      <td>10.00</td>
    </tr>
    <tr>
      <th>15</th>
      <td>16</td>
      <td>AI制药</td>
      <td>BK1170</td>
      <td>1.68</td>
      <td>0.000086</td>
      <td>0.90</td>
      <td>0.866667</td>
      <td>嘉和美康</td>
      <td>5.41</td>
    </tr>
    <tr>
      <th>16</th>
      <td>17</td>
      <td>减肥药</td>
      <td>BK1146</td>
      <td>1.67</td>
      <td>0.000258</td>
      <td>0.60</td>
      <td>0.960000</td>
      <td>德源药业</td>
      <td>3.78</td>
    </tr>
    <tr>
      <th>17</th>
      <td>18</td>
      <td>疫苗冷链</td>
      <td>BK0941</td>
      <td>1.62</td>
      <td>0.000319</td>
      <td>0.84</td>
      <td>0.777778</td>
      <td>必创科技</td>
      <td>9.52</td>
    </tr>
    <tr>
      <th>18</th>
      <td>19</td>
      <td>中药概念</td>
      <td>BK0615</td>
      <td>1.59</td>
      <td>0.001289</td>
      <td>1.15</td>
      <td>0.858156</td>
      <td>新里程</td>
      <td>10.00</td>
    </tr>
    <tr>
      <th>19</th>
      <td>20</td>
      <td>蒙脱石散</td>
      <td>BK1123</td>
      <td>1.53</td>
      <td>0.000039</td>
      <td>0.76</td>
      <td>0.900000</td>
      <td>易明医药</td>
      <td>3.74</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>排名前5概念板块领涨成分股</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">top5_concept_stocks</span><span class="o">=</span><span class="n">top5sectorStocks</span><span class="p">(</span><span class="n">basename</span><span class="p">,</span><span class="n">start_time</span><span class="p">,</span><span class="n">end_time</span><span class="p">,</span><span class="n">rank1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>排名前5领涨板块成分股列表。
No record stored and not available from source.
No record stored and not available from source.
No record stored and not available from source.
No record stored and not available from source.
No record stored and not available from source.
</pre></div>
</div>
</div>
</div>
</section>
<section id="id5">
<h3>2.2.3 集合竞价行业板块涨跌幅<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#当天集合竞价到开盘后30分钟涨跌幅排名</span>
<span class="n">basename</span><span class="o">=</span><span class="s1">&#39;industryRank&#39;</span>
<span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">end_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
<span class="n">rank3</span><span class="o">=</span><span class="n">recordRank</span><span class="p">(</span><span class="n">basename</span><span class="p">,</span><span class="n">start_time</span><span class="p">,</span><span class="n">end_time</span><span class="p">)</span>
<span class="n">rank3</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>排名</th>
      <th>板块名称</th>
      <th>板块代码</th>
      <th>涨跌幅</th>
      <th>市值比</th>
      <th>换手率</th>
      <th>上涨家数%</th>
      <th>领涨股票</th>
      <th>领涨股票-涨跌幅</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>半导体</td>
      <td>BK1036</td>
      <td>1.89</td>
      <td>0.045593</td>
      <td>0.0</td>
      <td>0.840000</td>
      <td>国芯科技</td>
      <td>20.01</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>船舶制造</td>
      <td>BK0729</td>
      <td>1.88</td>
      <td>0.004153</td>
      <td>0.0</td>
      <td>1.000000</td>
      <td>中国动力</td>
      <td>10.02</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>电子化学品</td>
      <td>BK1039</td>
      <td>1.83</td>
      <td>0.002984</td>
      <td>0.0</td>
      <td>0.913043</td>
      <td>中巨芯-U</td>
      <td>7.33</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>航天航空</td>
      <td>BK0480</td>
      <td>1.24</td>
      <td>0.011011</td>
      <td>0.0</td>
      <td>0.875000</td>
      <td>航天宏图</td>
      <td>8.28</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>汽车服务</td>
      <td>BK1016</td>
      <td>1.06</td>
      <td>0.000691</td>
      <td>0.0</td>
      <td>0.800000</td>
      <td>ST东时</td>
      <td>4.84</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>汽车整车</td>
      <td>BK1029</td>
      <td>0.72</td>
      <td>0.021158</td>
      <td>0.0</td>
      <td>0.541667</td>
      <td>动力新科</td>
      <td>10.04</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>通信设备</td>
      <td>BK0448</td>
      <td>0.67</td>
      <td>0.015660</td>
      <td>0.0</td>
      <td>0.592233</td>
      <td>长江通信</td>
      <td>10.02</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>计算机设备</td>
      <td>BK0735</td>
      <td>0.50</td>
      <td>0.009903</td>
      <td>0.0</td>
      <td>0.511111</td>
      <td>合众思壮</td>
      <td>10.05</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>橡胶制品</td>
      <td>BK1018</td>
      <td>0.40</td>
      <td>0.002831</td>
      <td>0.0</td>
      <td>0.576923</td>
      <td>青岛双星</td>
      <td>9.96</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>电子元件</td>
      <td>BK0459</td>
      <td>0.40</td>
      <td>0.018731</td>
      <td>0.0</td>
      <td>0.547826</td>
      <td>弘信电子</td>
      <td>19.95</td>
    </tr>
    <tr>
      <th>10</th>
      <td>11</td>
      <td>专用设备</td>
      <td>BK0910</td>
      <td>0.31</td>
      <td>0.014952</td>
      <td>0.0</td>
      <td>0.535398</td>
      <td>福能东方</td>
      <td>19.97</td>
    </tr>
    <tr>
      <th>11</th>
      <td>12</td>
      <td>光学光电子</td>
      <td>BK1038</td>
      <td>0.28</td>
      <td>0.011498</td>
      <td>0.0</td>
      <td>0.533333</td>
      <td>伟时电子</td>
      <td>9.96</td>
    </tr>
    <tr>
      <th>12</th>
      <td>13</td>
      <td>公用事业</td>
      <td>BK0427</td>
      <td>0.27</td>
      <td>0.001950</td>
      <td>0.0</td>
      <td>0.333333</td>
      <td>渤海股份</td>
      <td>9.89</td>
    </tr>
    <tr>
      <th>13</th>
      <td>14</td>
      <td>通信服务</td>
      <td>BK0736</td>
      <td>0.21</td>
      <td>0.031757</td>
      <td>0.0</td>
      <td>0.366667</td>
      <td>中国卫通</td>
      <td>9.98</td>
    </tr>
    <tr>
      <th>14</th>
      <td>15</td>
      <td>互联网服务</td>
      <td>BK0447</td>
      <td>0.18</td>
      <td>0.017239</td>
      <td>0.0</td>
      <td>0.396947</td>
      <td>海联讯</td>
      <td>19.97</td>
    </tr>
    <tr>
      <th>15</th>
      <td>16</td>
      <td>电力行业</td>
      <td>BK0428</td>
      <td>0.17</td>
      <td>0.030490</td>
      <td>0.0</td>
      <td>0.523810</td>
      <td>ST旭蓝</td>
      <td>4.71</td>
    </tr>
    <tr>
      <th>16</th>
      <td>17</td>
      <td>房地产服务</td>
      <td>BK1045</td>
      <td>0.16</td>
      <td>0.000979</td>
      <td>0.0</td>
      <td>0.470588</td>
      <td>阳光股份</td>
      <td>4.95</td>
    </tr>
    <tr>
      <th>17</th>
      <td>18</td>
      <td>工程建设</td>
      <td>BK0425</td>
      <td>0.13</td>
      <td>0.015695</td>
      <td>0.0</td>
      <td>0.474576</td>
      <td>大千生态</td>
      <td>10.00</td>
    </tr>
    <tr>
      <th>18</th>
      <td>19</td>
      <td>交运设备</td>
      <td>BK0429</td>
      <td>0.13</td>
      <td>0.006839</td>
      <td>0.0</td>
      <td>0.441860</td>
      <td>必得科技</td>
      <td>7.69</td>
    </tr>
    <tr>
      <th>19</th>
      <td>20</td>
      <td>燃气</td>
      <td>BK1028</td>
      <td>0.12</td>
      <td>0.002863</td>
      <td>0.0</td>
      <td>0.541667</td>
      <td>ST浩源</td>
      <td>5.01</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>行业板块中成分股</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">top5_industry_stocks</span><span class="o">=</span><span class="n">top5sectorStocks</span><span class="p">(</span><span class="n">basename</span><span class="p">,</span><span class="n">start_time</span><span class="p">,</span><span class="n">end_time</span><span class="p">,</span><span class="n">rank3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>排名前5领涨板块成分股列表。
板块：半导体:
       代码    名称    涨跌幅  成交额  换手率  市盈率-动态     市净率
0  688262  国芯科技  20.01  NaN  0.0  -66.25    5.00
1  688691  灿芯股份  15.42  NaN  0.0   82.35    6.54
2  688362  甬矽电子  11.55  NaN  0.0  202.27    4.61
3    2077  大港股份  10.02  NaN  0.0  196.31    3.14
4     670   盈方微   9.96  NaN  0.0 -142.50  372.83


板块：船舶制造:
       代码    名称    涨跌幅  成交额  换手率  市盈率-动态   市净率
0  600482  中国动力  10.02  NaN  0.0   58.05  1.50
1  300008  天海防务   2.36  NaN  0.0  102.80  5.19
2  300123  亚光科技   1.70  NaN  0.0  -72.61  3.31
3  300589  江龙船艇   1.37  NaN  0.0  164.31  6.34
4  600685  中船防务   1.28  NaN  0.0  152.23  2.05


板块：电子化学品:
       代码     名称   涨跌幅  成交额  换手率    市盈率-动态    市净率
0  688549  中巨芯-U  7.25  NaN  0.0    446.76   5.81
1  300576   容大感光  4.60  NaN  0.0    131.37  13.74
2  300655   晶瑞电材  3.86  NaN  0.0  13837.20   4.75
3  300429   强力新材  3.56  NaN  0.0   -279.66   5.45
4  688548  XD广钢气  3.23  NaN  0.0     57.64   2.42


板块：航天航空:
       代码    名称   涨跌幅  成交额  换手率   市盈率-动态   市净率
0  688066  航天宏图  8.28  NaN  0.0   -25.18  3.77
1    2389  航天彩虹  5.13  NaN  0.0  2857.16  2.94
2  600118  中国卫星  4.98  NaN  0.0 -1992.06  6.23
3  688523  航天环宇  4.44  NaN  0.0   140.14  6.05
4  603261  立航科技  3.31  NaN  0.0   -62.77  3.63


板块：汽车服务:
       代码    名称   涨跌幅  成交额  换手率  市盈率-动态   市净率
0  603377  ST东时  4.84  NaN  0.0  -12.84  1.10
1     757  浩物股份  4.03  NaN  0.0  -73.41  1.51
2  600653  申华控股  2.56  NaN  0.0  -72.68  7.49
3  600335  国机汽车  0.89  NaN  0.0   24.80  0.91
4  600386  北巴传媒  0.46  NaN  0.0  106.56  2.00
</pre></div>
</div>
</div>
</div>
</section>
<section id="id6">
<h3>2.2.4 开盘15分钟行业板块涨跌幅<a class="headerlink" href="#id6" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">basename</span><span class="o">=</span><span class="s1">&#39;industryRank&#39;</span>
<span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
<span class="n">end_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">51</span><span class="p">)</span>
<span class="n">rank4</span><span class="o">=</span><span class="n">recordRank</span><span class="p">(</span><span class="n">basename</span><span class="p">,</span><span class="n">start_time</span><span class="p">,</span><span class="n">end_time</span><span class="p">)</span>
<span class="n">rank4</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>排名</th>
      <th>板块名称</th>
      <th>板块代码</th>
      <th>涨跌幅</th>
      <th>市值比</th>
      <th>换手率</th>
      <th>上涨家数%</th>
      <th>领涨股票</th>
      <th>领涨股票-涨跌幅</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>能源金属</td>
      <td>BK1015</td>
      <td>4.66</td>
      <td>0.003880</td>
      <td>1.74</td>
      <td>1.000000</td>
      <td>威领股份</td>
      <td>9.97</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>医药商业</td>
      <td>BK1042</td>
      <td>4.27</td>
      <td>0.003478</td>
      <td>0.91</td>
      <td>1.000000</td>
      <td>人民同泰</td>
      <td>10.03</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>医疗服务</td>
      <td>BK0727</td>
      <td>2.53</td>
      <td>0.007480</td>
      <td>0.99</td>
      <td>0.888889</td>
      <td>国际医学</td>
      <td>10.07</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>汽车整车</td>
      <td>BK1029</td>
      <td>2.16</td>
      <td>0.022023</td>
      <td>1.26</td>
      <td>0.750000</td>
      <td>东风股份</td>
      <td>10.03</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>中药</td>
      <td>BK1040</td>
      <td>1.96</td>
      <td>0.009787</td>
      <td>1.77</td>
      <td>0.944444</td>
      <td>康惠制药</td>
      <td>10.03</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>酿酒行业</td>
      <td>BK0477</td>
      <td>1.60</td>
      <td>0.038877</td>
      <td>0.47</td>
      <td>0.948718</td>
      <td>岩石股份</td>
      <td>4.59</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>化学制药</td>
      <td>BK0465</td>
      <td>1.48</td>
      <td>0.017352</td>
      <td>0.62</td>
      <td>0.888112</td>
      <td>西点药业</td>
      <td>10.52</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>小金属</td>
      <td>BK1027</td>
      <td>1.45</td>
      <td>0.006910</td>
      <td>0.95</td>
      <td>0.675676</td>
      <td>有研新材</td>
      <td>10.01</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>美容护理</td>
      <td>BK1035</td>
      <td>1.42</td>
      <td>0.003102</td>
      <td>0.91</td>
      <td>0.888889</td>
      <td>润本股份</td>
      <td>6.16</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>生物制品</td>
      <td>BK1044</td>
      <td>1.41</td>
      <td>0.013166</td>
      <td>0.59</td>
      <td>0.853333</td>
      <td>神州细胞-U</td>
      <td>7.40</td>
    </tr>
    <tr>
      <th>10</th>
      <td>11</td>
      <td>化肥行业</td>
      <td>BK0731</td>
      <td>1.41</td>
      <td>0.003843</td>
      <td>0.70</td>
      <td>0.791667</td>
      <td>司尔特</td>
      <td>9.15</td>
    </tr>
    <tr>
      <th>11</th>
      <td>12</td>
      <td>电池</td>
      <td>BK1033</td>
      <td>1.34</td>
      <td>0.022136</td>
      <td>1.65</td>
      <td>0.666667</td>
      <td>曼恩斯特</td>
      <td>19.99</td>
    </tr>
    <tr>
      <th>12</th>
      <td>13</td>
      <td>医疗器械</td>
      <td>BK1041</td>
      <td>1.28</td>
      <td>0.013980</td>
      <td>0.51</td>
      <td>0.838983</td>
      <td>鹿得医疗</td>
      <td>8.74</td>
    </tr>
    <tr>
      <th>13</th>
      <td>14</td>
      <td>化学原料</td>
      <td>BK1019</td>
      <td>1.27</td>
      <td>0.008490</td>
      <td>0.37</td>
      <td>0.789474</td>
      <td>君正集团</td>
      <td>10.09</td>
    </tr>
    <tr>
      <th>14</th>
      <td>15</td>
      <td>商业百货</td>
      <td>BK0482</td>
      <td>1.15</td>
      <td>0.005130</td>
      <td>0.93</td>
      <td>0.796610</td>
      <td>宁波中百</td>
      <td>10.03</td>
    </tr>
    <tr>
      <th>15</th>
      <td>16</td>
      <td>多元金融</td>
      <td>BK0738</td>
      <td>1.09</td>
      <td>0.005425</td>
      <td>0.92</td>
      <td>0.619048</td>
      <td>翠微股份</td>
      <td>10.01</td>
    </tr>
    <tr>
      <th>16</th>
      <td>17</td>
      <td>汽车零部件</td>
      <td>BK0481</td>
      <td>1.09</td>
      <td>0.017177</td>
      <td>1.89</td>
      <td>0.700935</td>
      <td>冠盛股份</td>
      <td>10.02</td>
    </tr>
    <tr>
      <th>17</th>
      <td>18</td>
      <td>家电行业</td>
      <td>BK0456</td>
      <td>1.05</td>
      <td>0.018962</td>
      <td>0.97</td>
      <td>0.712644</td>
      <td>金海高科</td>
      <td>10.05</td>
    </tr>
    <tr>
      <th>18</th>
      <td>19</td>
      <td>装修建材</td>
      <td>BK0476</td>
      <td>0.94</td>
      <td>0.004522</td>
      <td>0.88</td>
      <td>0.735294</td>
      <td>顾地科技</td>
      <td>9.98</td>
    </tr>
    <tr>
      <th>19</th>
      <td>20</td>
      <td>塑料制品</td>
      <td>BK0454</td>
      <td>0.91</td>
      <td>0.003660</td>
      <td>1.09</td>
      <td>0.607143</td>
      <td>道恩股份</td>
      <td>10.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>行业板块中成分股</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">top5_industry_stocks</span><span class="o">=</span><span class="n">top5sectorStocks</span><span class="p">(</span><span class="n">basename</span><span class="p">,</span><span class="n">start_time</span><span class="p">,</span><span class="n">end_time</span><span class="p">,</span><span class="n">rank4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>排名前5领涨板块成分股列表。
板块：能源金属:
       代码    名称    涨跌幅           成交额   换手率  市盈率-动态   市净率
0  300390  天华新能  11.15  9.091016e+08  4.64   20.24  2.09
1  002667  威领股份   9.97  1.417661e+08  5.11  -19.01  5.08
2  002738  中矿资源   8.10  1.136033e+09  3.90   41.04  2.51
3  002460  赣锋锂业   7.73  2.174438e+09  4.29 -100.78  1.96
4  002466  天齐锂业   4.43  1.588016e+09  2.53   -9.21  1.61


板块：医药商业:
       代码    名称    涨跌幅           成交额   换手率  市盈率-动态   市净率
0  300937   药易购  18.21  1.933751e+08  9.98  165.84  3.64
1  603716  塞力医疗  10.03  6.601823e+07  4.11  -22.78  1.75
2  600829  人民同泰  10.03  1.285216e+08  2.70   17.84  1.70
3  600998   九州通   6.80  1.572866e+08  0.54   13.31  1.22
4  600272  开开实业   6.54  7.933593e+07  3.71   72.05  5.37


板块：医疗服务:
       代码    名称    涨跌幅           成交额   换手率  市盈率-动态   市净率
0  000516  国际医学  10.07  1.779459e+08  1.23  -52.43  4.06
1  002219   新里程  10.00  2.185075e+08  2.13  154.46  4.70
2  301239  普瑞眼科   7.51  1.000922e+08  2.69  384.22  3.66
3  002622  皓宸医疗   6.84  7.633875e+07  2.87  153.10  6.15
4  688246  嘉和美康   5.63  4.304028e+07  1.31  -83.02  2.56


板块：汽车整车:
       代码     名称    涨跌幅           成交额   换手率  市盈率-动态    市净率
0  600006   东风股份  10.03  1.044514e+08  0.63 -109.12   2.05
1  000550   江铃汽车  10.00  3.478546e+08  2.29   16.43   2.34
2  000980   众泰汽车   7.72  5.190451e+08  3.56  -35.62  13.20
3  600104   上汽集团   5.93  7.058676e+08  0.42   18.41   0.58
4  200550  江  铃Ｂ   5.82  4.589719e+06  0.11    5.92   0.84


板块：中药:
       代码     名称    涨跌幅          成交额   换手率  市盈率-动态     市净率
0  603139   康惠制药  10.03  33194967.00  1.98  -33.48    1.88
1  300391   长药控股   6.78  94496245.00  3.83  -10.51  179.25
2  002826   易明医药   5.13  68190857.00  3.28   41.34    3.15
3  000989   ST九芝   5.01  10725029.75  0.19   21.29    1.81
4  002750  *ST龙津   4.90  13497938.00  1.13  -96.58    2.39
</pre></div>
</div>
</div>
</div>
</section>
<section id="id7">
<h3>2.2.5 集合竞价阶段涨停个股热点明细<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#在指定时段获取涨停数据，若时间不在指定时段，则读取历史最后一次下载的记录。</span>
<span class="k">def</span> <span class="nf">stockLimitUp</span><span class="p">(</span><span class="n">start_time</span><span class="p">,</span><span class="n">end_time</span><span class="p">):</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">tStr</span> <span class="o">=</span> <span class="n">end_time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">%H%M&quot;</span><span class="p">)</span>
    <span class="n">csvfile</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;limitUp</span><span class="si">{</span><span class="n">tStr</span><span class="si">}</span><span class="s1">.txt&#39;</span>
    <span class="k">if</span> <span class="n">now</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">end_time</span> <span class="ow">and</span> <span class="n">now</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="n">start_time</span><span class="p">:</span>
        <span class="n">rank</span><span class="o">=</span><span class="n">ak</span><span class="o">.</span><span class="n">stock_zh_a_spot_em</span><span class="p">()</span>
        <span class="n">rank</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">csvfile</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">csvfile</span><span class="p">):</span>
            <span class="n">rank</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">csvfile</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No record stored and not available from source.&#39;</span><span class="p">)</span>
            <span class="n">rank</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">rank</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;代码&#39;</span><span class="p">,</span><span class="s1">&#39;名称&#39;</span><span class="p">,</span><span class="s1">&#39;涨跌幅&#39;</span><span class="p">,</span><span class="s1">&#39;量比&#39;</span><span class="p">,</span><span class="s1">&#39;换手率&#39;</span><span class="p">,</span><span class="s1">&#39;市盈率-动态&#39;</span><span class="p">,</span><span class="s1">&#39;市净率&#39;</span><span class="p">,</span><span class="s1">&#39;流通市值&#39;</span><span class="p">,</span><span class="s1">&#39;涨速&#39;</span><span class="p">,</span><span class="s1">&#39;5分钟涨跌&#39;</span><span class="p">,</span><span class="s1">&#39;60日涨跌幅&#39;</span><span class="p">,</span><span class="s1">&#39;年初至今涨跌幅&#39;</span><span class="p">]</span>
        <span class="n">rank</span><span class="o">=</span><span class="n">rank</span><span class="p">[</span><span class="n">columns</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;涨跌幅&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">rank</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">end_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
<span class="n">openA</span> <span class="o">=</span> <span class="n">stockLimitUp</span><span class="p">(</span><span class="n">start_time</span><span class="p">,</span><span class="n">end_time</span><span class="p">)</span>
<span class="n">openA</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>代码</th>
      <th>名称</th>
      <th>涨跌幅</th>
      <th>量比</th>
      <th>换手率</th>
      <th>市盈率-动态</th>
      <th>市净率</th>
      <th>流通市值</th>
      <th>涨速</th>
      <th>5分钟涨跌</th>
      <th>60日涨跌幅</th>
      <th>年初至今涨跌幅</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>920111</td>
      <td>N聚星</td>
      <td>348.00</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>42.98</td>
      <td>5.62</td>
      <td>1.032878e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>348.00</td>
      <td>348.00</td>
    </tr>
    <tr>
      <th>2</th>
      <td>688262</td>
      <td>国芯科技</td>
      <td>20.01</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-66.25</td>
      <td>5.00</td>
      <td>8.847816e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>104.71</td>
      <td>14.08</td>
    </tr>
    <tr>
      <th>1</th>
      <td>300493</td>
      <td>润欣科技</td>
      <td>20.01</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>178.79</td>
      <td>8.25</td>
      <td>8.652150e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>122.27</td>
      <td>103.90</td>
    </tr>
    <tr>
      <th>3</th>
      <td>300277</td>
      <td>海联讯</td>
      <td>19.97</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>801.72</td>
      <td>9.92</td>
      <td>4.821649e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>127.80</td>
      <td>67.09</td>
    </tr>
    <tr>
      <th>4</th>
      <td>300657</td>
      <td>弘信电子</td>
      <td>18.75</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>159.04</td>
      <td>8.74</td>
      <td>1.084570e+10</td>
      <td>-1.04</td>
      <td>-1.04</td>
      <td>81.71</td>
      <td>22.49</td>
    </tr>
    <tr>
      <th>5</th>
      <td>870436</td>
      <td>大地电气</td>
      <td>16.61</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-52.62</td>
      <td>3.66</td>
      <td>7.372159e+08</td>
      <td>-2.94</td>
      <td>-6.25</td>
      <td>127.27</td>
      <td>50.82</td>
    </tr>
    <tr>
      <th>6</th>
      <td>688316</td>
      <td>青云科技-U</td>
      <td>16.49</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-26.28</td>
      <td>18.43</td>
      <td>1.653434e+09</td>
      <td>3.51</td>
      <td>5.89</td>
      <td>76.99</td>
      <td>-11.18</td>
    </tr>
    <tr>
      <th>7</th>
      <td>300173</td>
      <td>福能东方</td>
      <td>16.04</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>553.54</td>
      <td>5.50</td>
      <td>4.996135e+09</td>
      <td>-3.27</td>
      <td>-3.27</td>
      <td>97.67</td>
      <td>38.49</td>
    </tr>
    <tr>
      <th>8</th>
      <td>688382</td>
      <td>益方生物-U</td>
      <td>10.54</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-18.14</td>
      <td>4.25</td>
      <td>5.116356e+09</td>
      <td>-1.54</td>
      <td>-1.54</td>
      <td>65.59</td>
      <td>-15.46</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2671</td>
      <td>龙泉股份</td>
      <td>10.10</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>28.46</td>
      <td>1.80</td>
      <td>2.949706e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>47.51</td>
      <td>-10.85</td>
    </tr>
    <tr>
      <th>10</th>
      <td>2165</td>
      <td>红 宝 丽</td>
      <td>10.09</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>58.74</td>
      <td>1.79</td>
      <td>3.572661e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>38.70</td>
      <td>18.89</td>
    </tr>
    <tr>
      <th>11</th>
      <td>2298</td>
      <td>中电兴发</td>
      <td>10.09</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-9.35</td>
      <td>1.45</td>
      <td>4.137702e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>59.05</td>
      <td>9.90</td>
    </tr>
    <tr>
      <th>12</th>
      <td>603222</td>
      <td>济民健康</td>
      <td>10.07</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>116.70</td>
      <td>2.81</td>
      <td>4.421263e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>42.23</td>
      <td>5.12</td>
    </tr>
    <tr>
      <th>13</th>
      <td>557</td>
      <td>西部创业</td>
      <td>10.06</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>33.62</td>
      <td>1.65</td>
      <td>1.004504e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>63.66</td>
      <td>42.65</td>
    </tr>
    <tr>
      <th>14</th>
      <td>2383</td>
      <td>合众思壮</td>
      <td>10.05</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-88.70</td>
      <td>4.12</td>
      <td>6.273886e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>68.26</td>
      <td>35.91</td>
    </tr>
    <tr>
      <th>15</th>
      <td>826</td>
      <td>启迪环境</td>
      <td>10.03</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-3.06</td>
      <td>1.56</td>
      <td>4.531812e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>106.49</td>
      <td>11.19</td>
    </tr>
    <tr>
      <th>16</th>
      <td>2065</td>
      <td>东华软件</td>
      <td>10.03</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>38.23</td>
      <td>2.11</td>
      <td>2.265271e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>72.73</td>
      <td>27.29</td>
    </tr>
    <tr>
      <th>17</th>
      <td>929</td>
      <td>兰州黄河</td>
      <td>10.02</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-34.79</td>
      <td>3.28</td>
      <td>1.794386e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>61.27</td>
      <td>-1.43</td>
    </tr>
    <tr>
      <th>18</th>
      <td>2547</td>
      <td>春兴精工</td>
      <td>10.02</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-25.23</td>
      <td>89.67</td>
      <td>5.816721e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>114.23</td>
      <td>12.85</td>
    </tr>
    <tr>
      <th>19</th>
      <td>600482</td>
      <td>中国动力</td>
      <td>10.02</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>58.05</td>
      <td>1.50</td>
      <td>5.752006e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>14.74</td>
      <td>44.80</td>
    </tr>
    <tr>
      <th>20</th>
      <td>600006</td>
      <td>东风股份</td>
      <td>10.01</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-99.18</td>
      <td>1.86</td>
      <td>1.516000e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>11.31</td>
      <td>32.06</td>
    </tr>
    <tr>
      <th>21</th>
      <td>2889</td>
      <td>东方嘉盛</td>
      <td>10.01</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>28.73</td>
      <td>2.90</td>
      <td>4.464548e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>61.02</td>
      <td>39.29</td>
    </tr>
    <tr>
      <th>22</th>
      <td>2651</td>
      <td>利君股份</td>
      <td>10.01</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>56.97</td>
      <td>3.31</td>
      <td>5.032626e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>36.29</td>
      <td>29.36</td>
    </tr>
    <tr>
      <th>26</th>
      <td>300379</td>
      <td>东方通</td>
      <td>10.00</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-50.22</td>
      <td>3.51</td>
      <td>1.158603e+10</td>
      <td>-8.33</td>
      <td>-8.33</td>
      <td>178.48</td>
      <td>20.35</td>
    </tr>
    <tr>
      <th>25</th>
      <td>601828</td>
      <td>美凯龙</td>
      <td>10.00</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-7.62</td>
      <td>0.40</td>
      <td>1.589917e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>76.00</td>
      <td>13.70</td>
    </tr>
    <tr>
      <th>24</th>
      <td>603955</td>
      <td>大千生态</td>
      <td>10.00</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>103.06</td>
      <td>1.36</td>
      <td>2.105017e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>78.89</td>
      <td>5.58</td>
    </tr>
    <tr>
      <th>23</th>
      <td>601869</td>
      <td>长飞光纤</td>
      <td>10.00</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>31.75</td>
      <td>2.09</td>
      <td>1.300283e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>32.07</td>
      <td>18.74</td>
    </tr>
    <tr>
      <th>27</th>
      <td>600619</td>
      <td>海立股份</td>
      <td>9.99</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>725.93</td>
      <td>3.60</td>
      <td>1.616230e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>277.86</td>
      <td>201.18</td>
    </tr>
    <tr>
      <th>28</th>
      <td>2849</td>
      <td>威星智能</td>
      <td>9.99</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>48.96</td>
      <td>3.25</td>
      <td>3.722294e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>93.10</td>
      <td>5.26</td>
    </tr>
    <tr>
      <th>29</th>
      <td>300991</td>
      <td>创益通</td>
      <td>9.99</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-633.48</td>
      <td>5.65</td>
      <td>2.247300e+09</td>
      <td>-8.32</td>
      <td>-8.36</td>
      <td>54.70</td>
      <td>44.09</td>
    </tr>
    <tr>
      <th>30</th>
      <td>600206</td>
      <td>有研新材</td>
      <td>9.99</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>89.10</td>
      <td>3.51</td>
      <td>1.361258e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>80.47</td>
      <td>31.27</td>
    </tr>
    <tr>
      <th>31</th>
      <td>601698</td>
      <td>中国卫通</td>
      <td>9.98</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>162.61</td>
      <td>6.65</td>
      <td>1.042578e+11</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>50.58</td>
      <td>42.74</td>
    </tr>
    <tr>
      <th>32</th>
      <td>2290</td>
      <td>禾盛新材</td>
      <td>9.98</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>39.92</td>
      <td>5.76</td>
      <td>4.551869e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>53.54</td>
      <td>41.51</td>
    </tr>
    <tr>
      <th>34</th>
      <td>2848</td>
      <td>高斯贝尔</td>
      <td>9.97</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-20.17</td>
      <td>16.93</td>
      <td>1.819908e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>63.82</td>
      <td>-5.11</td>
    </tr>
    <tr>
      <th>35</th>
      <td>2402</td>
      <td>和而泰</td>
      <td>9.97</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>27.58</td>
      <td>2.80</td>
      <td>1.131550e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>46.47</td>
      <td>-0.14</td>
    </tr>
    <tr>
      <th>33</th>
      <td>600292</td>
      <td>远达环保</td>
      <td>9.97</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>101.59</td>
      <td>2.30</td>
      <td>1.196992e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>211.59</td>
      <td>153.81</td>
    </tr>
    <tr>
      <th>36</th>
      <td>599</td>
      <td>青岛双星</td>
      <td>9.96</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-19.42</td>
      <td>2.70</td>
      <td>4.688090e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>65.90</td>
      <td>28.99</td>
    </tr>
    <tr>
      <th>37</th>
      <td>2510</td>
      <td>天汽模</td>
      <td>9.94</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>57.92</td>
      <td>3.30</td>
      <td>6.904422e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>104.13</td>
      <td>53.42</td>
    </tr>
    <tr>
      <th>38</th>
      <td>657</td>
      <td>中钨高新</td>
      <td>9.92</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>56.86</td>
      <td>2.67</td>
      <td>1.395739e+10</td>
      <td>-0.09</td>
      <td>-0.09</td>
      <td>38.15</td>
      <td>34.01</td>
    </tr>
    <tr>
      <th>39</th>
      <td>600654</td>
      <td>中安科</td>
      <td>9.91</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>738.37</td>
      <td>6.44</td>
      <td>8.408048e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>58.44</td>
      <td>51.87</td>
    </tr>
    <tr>
      <th>40</th>
      <td>833580</td>
      <td>科创新材</td>
      <td>9.89</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>148.88</td>
      <td>4.71</td>
      <td>1.006264e+09</td>
      <td>-9.09</td>
      <td>-15.41</td>
      <td>218.02</td>
      <td>123.33</td>
    </tr>
    <tr>
      <th>41</th>
      <td>2077</td>
      <td>大港股份</td>
      <td>9.83</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>195.98</td>
      <td>3.13</td>
      <td>1.037083e+10</td>
      <td>-0.17</td>
      <td>-0.17</td>
      <td>47.44</td>
      <td>17.18</td>
    </tr>
    <tr>
      <th>42</th>
      <td>670</td>
      <td>盈方微</td>
      <td>9.83</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-142.32</td>
      <td>372.37</td>
      <td>5.892391e+09</td>
      <td>-0.12</td>
      <td>-0.12</td>
      <td>71.79</td>
      <td>20.35</td>
    </tr>
    <tr>
      <th>43</th>
      <td>600081</td>
      <td>东风科技</td>
      <td>9.79</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>81.27</td>
      <td>1.46</td>
      <td>6.636314e+09</td>
      <td>-0.17</td>
      <td>-0.17</td>
      <td>40.02</td>
      <td>7.53</td>
    </tr>
    <tr>
      <th>44</th>
      <td>600110</td>
      <td>诺德股份</td>
      <td>9.72</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-32.43</td>
      <td>1.62</td>
      <td>9.404681e+09</td>
      <td>-0.18</td>
      <td>-0.18</td>
      <td>73.16</td>
      <td>-3.90</td>
    </tr>
    <tr>
      <th>45</th>
      <td>600345</td>
      <td>长江通信</td>
      <td>9.46</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>114.95</td>
      <td>2.21</td>
      <td>4.583700e+09</td>
      <td>-0.52</td>
      <td>-0.52</td>
      <td>26.85</td>
      <td>20.01</td>
    </tr>
    <tr>
      <th>46</th>
      <td>600841</td>
      <td>动力新科</td>
      <td>9.45</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>-6.02</td>
      <td>2.38</td>
      <td>6.717052e+09</td>
      <td>-0.54</td>
      <td>-0.54</td>
      <td>78.92</td>
      <td>23.52</td>
    </tr>
    <tr>
      <th>47</th>
      <td>1217</td>
      <td>华尔泰</td>
      <td>9.44</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>35.60</td>
      <td>1.69</td>
      <td>1.526044e+09</td>
      <td>-0.43</td>
      <td>-0.52</td>
      <td>21.48</td>
      <td>-18.12</td>
    </tr>
    <tr>
      <th>48</th>
      <td>838971</td>
      <td>天马新材</td>
      <td>9.39</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>141.87</td>
      <td>10.89</td>
      <td>3.809370e+09</td>
      <td>5.12</td>
      <td>6.03</td>
      <td>399.22</td>
      <td>181.30</td>
    </tr>
    <tr>
      <th>49</th>
      <td>605218</td>
      <td>伟时电子</td>
      <td>9.29</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>172.96</td>
      <td>5.67</td>
      <td>7.236338e+09</td>
      <td>-0.64</td>
      <td>-0.64</td>
      <td>114.51</td>
      <td>30.62</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="id8">
<h3>2.2.6 开盘15分钟涨停个股热点明细<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
<span class="n">end_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">53</span><span class="p">)</span>
<span class="n">open15</span> <span class="o">=</span> <span class="n">stockLimitUp</span><span class="p">(</span><span class="n">start_time</span><span class="p">,</span><span class="n">end_time</span><span class="p">)</span>
<span class="n">open15</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>代码</th>
      <th>名称</th>
      <th>涨跌幅</th>
      <th>量比</th>
      <th>换手率</th>
      <th>市盈率-动态</th>
      <th>市净率</th>
      <th>流通市值</th>
      <th>涨速</th>
      <th>5分钟涨跌</th>
      <th>60日涨跌幅</th>
      <th>年初至今涨跌幅</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>430425</td>
      <td>乐创技术</td>
      <td>29.99</td>
      <td>7.28</td>
      <td>7.50</td>
      <td>78.65</td>
      <td>6.12</td>
      <td>1.178450e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>194.42</td>
      <td>39.49</td>
    </tr>
    <tr>
      <th>2</th>
      <td>301209</td>
      <td>联合化学</td>
      <td>20.01</td>
      <td>19.57</td>
      <td>13.18</td>
      <td>46.13</td>
      <td>3.75</td>
      <td>8.303050e+08</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>57.26</td>
      <td>36.87</td>
    </tr>
    <tr>
      <th>1</th>
      <td>301000</td>
      <td>肇民科技</td>
      <td>20.01</td>
      <td>8.40</td>
      <td>2.66</td>
      <td>36.20</td>
      <td>4.49</td>
      <td>4.783582e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>61.50</td>
      <td>41.99</td>
    </tr>
    <tr>
      <th>3</th>
      <td>300912</td>
      <td>凯龙高科</td>
      <td>20.00</td>
      <td>19.12</td>
      <td>6.24</td>
      <td>-11.75</td>
      <td>2.66</td>
      <td>1.359285e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>63.47</td>
      <td>-12.05</td>
    </tr>
    <tr>
      <th>4</th>
      <td>301325</td>
      <td>曼恩斯特</td>
      <td>19.99</td>
      <td>15.44</td>
      <td>11.88</td>
      <td>107.62</td>
      <td>3.14</td>
      <td>3.704103e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>77.87</td>
      <td>-0.02</td>
    </tr>
    <tr>
      <th>5</th>
      <td>300546</td>
      <td>雄帝科技</td>
      <td>19.99</td>
      <td>9.44</td>
      <td>7.84</td>
      <td>298.59</td>
      <td>3.98</td>
      <td>3.066533e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>107.84</td>
      <td>46.16</td>
    </tr>
    <tr>
      <th>6</th>
      <td>688089</td>
      <td>嘉必优</td>
      <td>19.98</td>
      <td>0.80</td>
      <td>0.17</td>
      <td>37.77</td>
      <td>2.77</td>
      <td>4.224559e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>62.04</td>
      <td>41.81</td>
    </tr>
    <tr>
      <th>7</th>
      <td>300277</td>
      <td>海联讯</td>
      <td>19.97</td>
      <td>0.68</td>
      <td>0.33</td>
      <td>961.84</td>
      <td>11.90</td>
      <td>5.784641e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>175.04</td>
      <td>100.46</td>
    </tr>
    <tr>
      <th>8</th>
      <td>688678</td>
      <td>福立旺</td>
      <td>19.24</td>
      <td>14.07</td>
      <td>3.79</td>
      <td>45.62</td>
      <td>2.60</td>
      <td>3.963574e+09</td>
      <td>2.45</td>
      <td>6.12</td>
      <td>82.94</td>
      <td>25.97</td>
    </tr>
    <tr>
      <th>9</th>
      <td>300937</td>
      <td>药易购</td>
      <td>16.74</td>
      <td>12.84</td>
      <td>10.47</td>
      <td>163.78</td>
      <td>3.59</td>
      <td>1.992202e+09</td>
      <td>-0.97</td>
      <td>7.98</td>
      <td>54.52</td>
      <td>1.83</td>
    </tr>
    <tr>
      <th>10</th>
      <td>832471</td>
      <td>美邦科技</td>
      <td>15.96</td>
      <td>10.40</td>
      <td>11.45</td>
      <td>71.04</td>
      <td>3.01</td>
      <td>5.773997e+08</td>
      <td>-1.85</td>
      <td>2.96</td>
      <td>122.22</td>
      <td>65.85</td>
    </tr>
    <tr>
      <th>11</th>
      <td>837592</td>
      <td>华信永道</td>
      <td>15.68</td>
      <td>6.81</td>
      <td>10.49</td>
      <td>-161.99</td>
      <td>18.18</td>
      <td>3.886848e+09</td>
      <td>-2.45</td>
      <td>-3.96</td>
      <td>481.38</td>
      <td>317.56</td>
    </tr>
    <tr>
      <th>12</th>
      <td>870436</td>
      <td>大地电气</td>
      <td>14.19</td>
      <td>11.56</td>
      <td>12.38</td>
      <td>-66.97</td>
      <td>4.66</td>
      <td>9.382748e+08</td>
      <td>1.94</td>
      <td>3.24</td>
      <td>196.61</td>
      <td>91.96</td>
    </tr>
    <tr>
      <th>13</th>
      <td>301212</td>
      <td>联盛化学</td>
      <td>14.16</td>
      <td>17.36</td>
      <td>5.93</td>
      <td>150.71</td>
      <td>2.03</td>
      <td>6.793200e+08</td>
      <td>9.97</td>
      <td>10.59</td>
      <td>27.13</td>
      <td>-6.12</td>
    </tr>
    <tr>
      <th>14</th>
      <td>300390</td>
      <td>天华新能</td>
      <td>14.08</td>
      <td>13.24</td>
      <td>4.87</td>
      <td>20.78</td>
      <td>2.15</td>
      <td>2.070075e+10</td>
      <td>2.80</td>
      <td>-0.03</td>
      <td>85.59</td>
      <td>26.45</td>
    </tr>
    <tr>
      <th>15</th>
      <td>301171</td>
      <td>易点天下</td>
      <td>12.25</td>
      <td>17.10</td>
      <td>16.56</td>
      <td>50.90</td>
      <td>3.75</td>
      <td>8.658052e+09</td>
      <td>-0.14</td>
      <td>3.09</td>
      <td>116.53</td>
      <td>42.62</td>
    </tr>
    <tr>
      <th>16</th>
      <td>300682</td>
      <td>朗新集团</td>
      <td>11.75</td>
      <td>21.94</td>
      <td>4.10</td>
      <td>86.57</td>
      <td>2.47</td>
      <td>1.790470e+10</td>
      <td>3.15</td>
      <td>2.34</td>
      <td>109.73</td>
      <td>5.71</td>
    </tr>
    <tr>
      <th>17</th>
      <td>301548</td>
      <td>崇德科技</td>
      <td>10.84</td>
      <td>21.21</td>
      <td>8.64</td>
      <td>45.08</td>
      <td>3.51</td>
      <td>1.395981e+09</td>
      <td>0.37</td>
      <td>2.13</td>
      <td>23.89</td>
      <td>42.18</td>
    </tr>
    <tr>
      <th>18</th>
      <td>688116</td>
      <td>天奈科技</td>
      <td>10.74</td>
      <td>17.52</td>
      <td>6.16</td>
      <td>60.28</td>
      <td>5.37</td>
      <td>1.467837e+10</td>
      <td>-0.07</td>
      <td>-0.72</td>
      <td>112.26</td>
      <td>48.23</td>
    </tr>
    <tr>
      <th>19</th>
      <td>833533</td>
      <td>骏创科技</td>
      <td>10.32</td>
      <td>4.26</td>
      <td>10.90</td>
      <td>57.26</td>
      <td>9.99</td>
      <td>1.287369e+09</td>
      <td>-0.41</td>
      <td>-1.87</td>
      <td>213.19</td>
      <td>62.16</td>
    </tr>
    <tr>
      <th>20</th>
      <td>688691</td>
      <td>灿芯股份</td>
      <td>10.27</td>
      <td>17.51</td>
      <td>20.00</td>
      <td>94.42</td>
      <td>7.50</td>
      <td>2.192745e+09</td>
      <td>2.10</td>
      <td>4.10</td>
      <td>81.15</td>
      <td>342.56</td>
    </tr>
    <tr>
      <th>21</th>
      <td>300499</td>
      <td>高澜股份</td>
      <td>10.26</td>
      <td>6.88</td>
      <td>10.16</td>
      <td>-245.29</td>
      <td>4.17</td>
      <td>5.132333e+09</td>
      <td>3.45</td>
      <td>2.88</td>
      <td>78.56</td>
      <td>31.87</td>
    </tr>
    <tr>
      <th>22</th>
      <td>600654</td>
      <td>中安科</td>
      <td>10.11</td>
      <td>1.70</td>
      <td>0.26</td>
      <td>813.01</td>
      <td>7.09</td>
      <td>9.258042e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>73.71</td>
      <td>67.22</td>
    </tr>
    <tr>
      <th>23</th>
      <td>002662</td>
      <td>京威股份</td>
      <td>10.10</td>
      <td>7.64</td>
      <td>3.03</td>
      <td>14.84</td>
      <td>1.49</td>
      <td>6.374920e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>49.65</td>
      <td>24.63</td>
    </tr>
    <tr>
      <th>24</th>
      <td>601216</td>
      <td>君正集团</td>
      <td>10.09</td>
      <td>1.97</td>
      <td>0.42</td>
      <td>16.95</td>
      <td>1.91</td>
      <td>5.062810e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>60.43</td>
      <td>75.44</td>
    </tr>
    <tr>
      <th>25</th>
      <td>000516</td>
      <td>国际医学</td>
      <td>10.07</td>
      <td>6.82</td>
      <td>1.23</td>
      <td>-52.43</td>
      <td>4.06</td>
      <td>1.457746e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>43.54</td>
      <td>-19.11</td>
    </tr>
    <tr>
      <th>26</th>
      <td>603311</td>
      <td>金海高科</td>
      <td>10.05</td>
      <td>48.58</td>
      <td>3.66</td>
      <td>38.08</td>
      <td>1.99</td>
      <td>2.582929e+09</td>
      <td>0.27</td>
      <td>0.00</td>
      <td>28.82</td>
      <td>6.73</td>
    </tr>
    <tr>
      <th>27</th>
      <td>002073</td>
      <td>软控股份</td>
      <td>10.05</td>
      <td>12.71</td>
      <td>3.45</td>
      <td>20.63</td>
      <td>1.68</td>
      <td>9.165076e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>42.35</td>
      <td>43.89</td>
    </tr>
    <tr>
      <th>28</th>
      <td>002387</td>
      <td>维信诺</td>
      <td>10.04</td>
      <td>4.47</td>
      <td>2.04</td>
      <td>-8.07</td>
      <td>3.13</td>
      <td>1.927188e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>133.95</td>
      <td>24.17</td>
    </tr>
    <tr>
      <th>29</th>
      <td>000833</td>
      <td>粤桂股份</td>
      <td>10.04</td>
      <td>2.43</td>
      <td>1.30</td>
      <td>23.18</td>
      <td>1.98</td>
      <td>3.929060e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>73.55</td>
      <td>69.47</td>
    </tr>
    <tr>
      <th>30</th>
      <td>002177</td>
      <td>御银股份</td>
      <td>10.04</td>
      <td>6.59</td>
      <td>9.03</td>
      <td>264.08</td>
      <td>2.60</td>
      <td>3.888111e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>68.41</td>
      <td>31.15</td>
    </tr>
    <tr>
      <th>34</th>
      <td>600006</td>
      <td>东风股份</td>
      <td>10.03</td>
      <td>2.80</td>
      <td>0.63</td>
      <td>-109.12</td>
      <td>2.05</td>
      <td>1.668000e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>23.01</td>
      <td>45.30</td>
    </tr>
    <tr>
      <th>35</th>
      <td>603716</td>
      <td>塞力医疗</td>
      <td>10.03</td>
      <td>9.89</td>
      <td>4.22</td>
      <td>-22.78</td>
      <td>1.75</td>
      <td>1.701324e+09</td>
      <td>6.16</td>
      <td>6.96</td>
      <td>24.63</td>
      <td>-23.81</td>
    </tr>
    <tr>
      <th>36</th>
      <td>600829</td>
      <td>人民同泰</td>
      <td>10.03</td>
      <td>8.90</td>
      <td>2.71</td>
      <td>17.84</td>
      <td>1.70</td>
      <td>4.900059e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>49.29</td>
      <td>10.03</td>
    </tr>
    <tr>
      <th>33</th>
      <td>600857</td>
      <td>宁波中百</td>
      <td>10.03</td>
      <td>9.99</td>
      <td>1.38</td>
      <td>-163.57</td>
      <td>2.07</td>
      <td>1.747452e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>37.63</td>
      <td>-16.68</td>
    </tr>
    <tr>
      <th>32</th>
      <td>603657</td>
      <td>春光科技</td>
      <td>10.03</td>
      <td>9.66</td>
      <td>2.36</td>
      <td>326.17</td>
      <td>2.16</td>
      <td>2.031906e+09</td>
      <td>5.92</td>
      <td>8.44</td>
      <td>37.89</td>
      <td>-6.00</td>
    </tr>
    <tr>
      <th>31</th>
      <td>603139</td>
      <td>康惠制药</td>
      <td>10.03</td>
      <td>15.31</td>
      <td>2.03</td>
      <td>-33.48</td>
      <td>1.88</td>
      <td>1.708947e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>23.72</td>
      <td>-8.84</td>
    </tr>
    <tr>
      <th>37</th>
      <td>002846</td>
      <td>英联股份</td>
      <td>10.02</td>
      <td>6.90</td>
      <td>2.84</td>
      <td>1405.90</td>
      <td>2.79</td>
      <td>2.426251e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>40.27</td>
      <td>-13.63</td>
    </tr>
    <tr>
      <th>38</th>
      <td>000795</td>
      <td>英洛华</td>
      <td>10.02</td>
      <td>14.27</td>
      <td>13.89</td>
      <td>60.57</td>
      <td>6.20</td>
      <td>1.667649e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>165.52</td>
      <td>137.26</td>
    </tr>
    <tr>
      <th>39</th>
      <td>603928</td>
      <td>兴业股份</td>
      <td>10.02</td>
      <td>14.86</td>
      <td>2.94</td>
      <td>59.00</td>
      <td>1.91</td>
      <td>2.877638e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>46.79</td>
      <td>8.07</td>
    </tr>
    <tr>
      <th>40</th>
      <td>603918</td>
      <td>金桥信息</td>
      <td>10.02</td>
      <td>1.49</td>
      <td>0.76</td>
      <td>-63.58</td>
      <td>5.92</td>
      <td>6.112356e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>83.61</td>
      <td>-10.56</td>
    </tr>
    <tr>
      <th>41</th>
      <td>605088</td>
      <td>冠盛股份</td>
      <td>10.02</td>
      <td>9.12</td>
      <td>2.03</td>
      <td>13.86</td>
      <td>1.84</td>
      <td>3.959438e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>30.14</td>
      <td>1.96</td>
    </tr>
    <tr>
      <th>51</th>
      <td>000962</td>
      <td>东方钽业</td>
      <td>10.01</td>
      <td>9.60</td>
      <td>3.69</td>
      <td>38.14</td>
      <td>3.10</td>
      <td>7.791651e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>57.99</td>
      <td>26.88</td>
    </tr>
    <tr>
      <th>47</th>
      <td>301130</td>
      <td>西点药业</td>
      <td>10.01</td>
      <td>51.72</td>
      <td>7.18</td>
      <td>53.76</td>
      <td>2.72</td>
      <td>1.753610e+09</td>
      <td>-1.08</td>
      <td>-2.52</td>
      <td>17.31</td>
      <td>9.41</td>
    </tr>
    <tr>
      <th>50</th>
      <td>002976</td>
      <td>瑞玛精密</td>
      <td>10.01</td>
      <td>13.31</td>
      <td>5.62</td>
      <td>-416.02</td>
      <td>3.87</td>
      <td>1.681853e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>24.42</td>
      <td>-27.71</td>
    </tr>
    <tr>
      <th>49</th>
      <td>002853</td>
      <td>皮阿诺</td>
      <td>10.01</td>
      <td>9.94</td>
      <td>3.70</td>
      <td>192.51</td>
      <td>1.60</td>
      <td>1.497994e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>57.66</td>
      <td>-10.80</td>
    </tr>
    <tr>
      <th>48</th>
      <td>603123</td>
      <td>翠微股份</td>
      <td>10.01</td>
      <td>9.71</td>
      <td>3.63</td>
      <td>-16.83</td>
      <td>3.48</td>
      <td>6.953262e+09</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>73.62</td>
      <td>0.09</td>
    </tr>
    <tr>
      <th>43</th>
      <td>600292</td>
      <td>远达环保</td>
      <td>10.01</td>
      <td>9.36</td>
      <td>7.06</td>
      <td>108.49</td>
      <td>2.46</td>
      <td>1.278197e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>231.38</td>
      <td>171.03</td>
    </tr>
    <tr>
      <th>46</th>
      <td>002756</td>
      <td>永兴材料</td>
      <td>10.01</td>
      <td>10.70</td>
      <td>2.96</td>
      <td>20.64</td>
      <td>2.13</td>
      <td>1.926368e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>51.75</td>
      <td>-0.30</td>
    </tr>
    <tr>
      <th>44</th>
      <td>002065</td>
      <td>东华软件</td>
      <td>10.01</td>
      <td>1.25</td>
      <td>0.31</td>
      <td>42.06</td>
      <td>2.33</td>
      <td>2.492089e+10</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>91.29</td>
      <td>40.03</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<section id="id9">
<h4>2.2.7 板块动态评析<a class="headerlink" href="#id9" title="Link to this heading">#</a></h4>
<p>本轮行情启动股票热点追踪（需要从历史行情中组合分析，现有股票涨停池昨日和今日都不稳定）</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>

<span class="k">def</span> <span class="nf">get_stock_zt_pool</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">):</span>
    <span class="n">current_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">start_date</span><span class="p">,</span> <span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">end_date</span><span class="p">,</span> <span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
    
    <span class="n">concat_zt_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

    <span class="k">while</span> <span class="n">current_date</span> <span class="o">&lt;=</span> <span class="n">end_date</span><span class="p">:</span>
        <span class="n">date_str</span> <span class="o">=</span> <span class="n">current_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">stock_zt_pool_strong_em_df</span> <span class="o">=</span> <span class="n">ak</span><span class="o">.</span><span class="n">stock_zt_pool_previous_em</span><span class="p">(</span><span class="n">date</span><span class="o">=</span><span class="n">date_str</span><span class="p">)</span>
            <span class="n">stock_zt_pool_strong_em_df</span><span class="p">[</span><span class="s1">&#39;日期&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">date_str</span><span class="p">)</span>
            <span class="n">concat_zt_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">concat_zt_df</span><span class="p">,</span> <span class="n">stock_zt_pool_strong_em_df</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error fetching data for </span><span class="si">{</span><span class="n">date_str</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="n">current_date</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">concat_zt_df</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">syclestart</span><span class="o">=</span><span class="s1">&#39;20240925&#39;</span>
<span class="c1">#ak.stock_zt_pool_strong_em(date=syclestart)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#本轮行情启动日</span>
<span class="n">syclestart</span><span class="o">=</span><span class="s1">&#39;20240924&#39;</span>
<span class="n">result_df</span> <span class="o">=</span> <span class="n">get_stock_zt_pool</span><span class="p">(</span><span class="n">syclestart</span><span class="p">,</span> <span class="n">lastday</span><span class="p">)</span>
<span class="n">result_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">30</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1">#本轮行情启动日</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">syclestart</span><span class="o">=</span><span class="s1">&#39;20240924&#39;</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">result_df</span> <span class="o">=</span> <span class="n">get_stock_zt_pool</span><span class="p">(</span><span class="n">syclestart</span><span class="p">,</span> <span class="n">lastday</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">result_df</span>

<span class="ne">NameError</span>: name &#39;lastday&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="id10">
<h2>4.个股市场<a class="headerlink" href="#id10" title="Link to this heading">#</a></h2>
<section id="id11">
<h3>4.1 跟进股票列表<a class="headerlink" href="#id11" title="Link to this heading">#</a></h3>
<section id="k">
<h4>4.1.1 历史K线<a class="headerlink" href="#k" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plotDcStockSingle</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">days</span><span class="p">):</span>
    <span class="n">OCHLVDict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;日期&#39;</span><span class="p">:</span><span class="s1">&#39;Date&#39;</span><span class="p">,</span><span class="s1">&#39;开盘&#39;</span><span class="p">:</span><span class="s1">&#39;Open&#39;</span><span class="p">,</span><span class="s1">&#39;收盘&#39;</span><span class="p">:</span><span class="s1">&#39;Close&#39;</span><span class="p">,</span><span class="s1">&#39;最高&#39;</span><span class="p">:</span><span class="s1">&#39;High&#39;</span><span class="p">,</span><span class="s1">&#39;最低&#39;</span><span class="p">:</span><span class="s1">&#39;Low&#39;</span><span class="p">,</span><span class="s1">&#39;成交量&#39;</span><span class="p">:</span><span class="s1">&#39;Volume&#39;</span><span class="p">}</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">days</span><span class="si">}</span><span class="s1">K线图&#39;</span><span class="p">)</span>
    <span class="n">plotStock</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="n">days</span><span class="p">),</span><span class="n">OCHLVDict</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#根据代码获取股票信息</span>
<span class="c1">#symbol:若是字符串，则返回单个股信息；若是列表，则遍历元素，返回相应列表。</span>
<span class="k">def</span> <span class="nf">getStockInfo</span><span class="p">(</span><span class="n">symbol</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="o">==</span><span class="s1">&#39;str&#39;</span><span class="p">:</span>
        <span class="n">stocknamedf</span><span class="o">=</span><span class="n">ak</span><span class="o">.</span><span class="n">stock_individual_info_em</span><span class="p">(</span><span class="n">symbol</span><span class="o">=</span><span class="n">symbol</span><span class="p">)</span>
        <span class="n">stockname</span><span class="o">=</span><span class="n">stocknamedf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">stocknamedf</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;股票简称&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">stockIPO</span><span class="o">=</span><span class="n">stocknamedf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">stocknamedf</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;上市时间&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">][</span><span class="mi">7</span><span class="p">]</span>
        <span class="n">stockIndustry</span><span class="o">=</span><span class="n">stocknamedf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">stocknamedf</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;行业&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">][</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">stockTAmount</span><span class="o">=</span><span class="n">stocknamedf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">stocknamedf</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;总股本&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">stockFAmount</span><span class="o">=</span><span class="n">stocknamedf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">stocknamedf</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;流通股&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">stockTValue</span><span class="o">=</span><span class="n">stocknamedf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">stocknamedf</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;总市值&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">stockFValue</span><span class="o">=</span><span class="n">stocknamedf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">stocknamedf</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;流通市值&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">][</span><span class="mi">5</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">stockname</span><span class="p">,</span><span class="n">stockIPO</span><span class="p">,</span><span class="n">stockIndustry</span><span class="p">,</span><span class="n">stockTAmount</span><span class="p">,</span><span class="n">stockFAmount</span><span class="p">,</span><span class="n">stockTValue</span><span class="p">,</span><span class="n">stockFValue</span><span class="o">=</span><span class="p">[],[],[],[],[],[],[]</span>
        <span class="k">for</span> <span class="n">sym</span> <span class="ow">in</span> <span class="n">symbol</span><span class="p">:</span>
            <span class="n">stocknamedf</span><span class="o">=</span><span class="n">ak</span><span class="o">.</span><span class="n">stock_individual_info_em</span><span class="p">(</span><span class="n">symbol</span><span class="o">=</span><span class="n">sym</span><span class="p">)</span>
            <span class="n">stockname</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stocknamedf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">stocknamedf</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;股票简称&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">stockIPO</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stocknamedf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">stocknamedf</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;上市时间&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">][</span><span class="mi">7</span><span class="p">])</span>
            <span class="n">stockIndustry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stocknamedf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">stocknamedf</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;行业&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">][</span><span class="mi">6</span><span class="p">])</span>
            <span class="n">stockTAmount</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stocknamedf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">stocknamedf</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;总股本&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">stockFAmount</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stocknamedf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">stocknamedf</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;流通股&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">][</span><span class="mi">3</span><span class="p">])</span>
            <span class="n">stockTValue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stocknamedf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">stocknamedf</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;总市值&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">][</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">stockFValue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stocknamedf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">stocknamedf</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;流通市值&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">][</span><span class="mi">5</span><span class="p">])</span>
            
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;名称&#39;</span><span class="p">:</span><span class="n">stockname</span><span class="p">,</span><span class="s1">&#39;IPO&#39;</span><span class="p">:</span><span class="n">stockIPO</span><span class="p">,</span><span class="s1">&#39;行业&#39;</span><span class="p">:</span><span class="n">stockIndustry</span><span class="p">,</span><span class="s1">&#39;总股本&#39;</span><span class="p">:</span><span class="n">stockTAmount</span><span class="p">,</span><span class="s1">&#39;流通股&#39;</span><span class="p">:</span><span class="n">stockFAmount</span><span class="p">,</span><span class="s1">&#39;总市值&#39;</span><span class="p">:</span><span class="n">stockTValue</span><span class="p">,</span><span class="s1">&#39;流通市值&#39;</span><span class="p">:</span><span class="n">stockFValue</span><span class="p">}</span>

<span class="c1">#画指定周期的股票烛线图</span>
<span class="k">def</span> <span class="nf">plotDcStocks</span><span class="p">(</span><span class="n">stocksymb</span><span class="p">,</span><span class="n">periods</span><span class="p">):</span>
    <span class="n">stockDict</span><span class="o">=</span><span class="p">{}</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">periods</span><span class="p">:</span>
        <span class="n">stockdf</span> <span class="o">=</span> <span class="n">ak</span><span class="o">.</span><span class="n">stock_zh_a_hist</span><span class="p">(</span><span class="n">symbol</span><span class="o">=</span><span class="n">stocksymb</span><span class="p">,</span><span class="n">period</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>
        <span class="n">stockname</span><span class="o">=</span><span class="n">getStockInfo</span><span class="p">(</span><span class="n">stocksymb</span><span class="p">)[</span><span class="s1">&#39;名称&#39;</span><span class="p">]</span>
        <span class="n">stockDict</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">=</span><span class="n">stockdf</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">stockname</span><span class="si">}</span><span class="s1">-周期：</span><span class="si">{</span><span class="n">p</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">stockdf</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">plotDcStockSingle</span><span class="p">(</span><span class="n">stockdf</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">stockDict</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">stockname</span>
    <span class="k">return</span> <span class="n">stockDict</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stocksymb</span><span class="o">=</span><span class="s1">&#39;300339&#39;</span>
<span class="n">periods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;daily&#39;</span><span class="p">,</span><span class="s1">&#39;weekly&#39;</span><span class="p">,</span><span class="s1">&#39;monthly&#39;</span><span class="p">]</span>
<span class="n">stockDict</span><span class="o">=</span><span class="n">plotDcStocks</span><span class="p">(</span><span class="n">stocksymb</span><span class="p">,</span><span class="n">periods</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>润和软件-周期：daily
              日期    股票代码     开盘     收盘     最高     最低      成交量           成交额  \
0     2012-07-18  300339  28.00  23.90  28.00  23.21   150973  3.772116e+08   
1     2012-07-19  300339  24.40  24.07  25.30  23.71    93127  2.276391e+08   
2     2012-07-20  300339  24.00  24.19  24.78  23.92    61087  1.484579e+08   
3     2012-07-23  300339  23.51  23.20  23.59  21.78    60498  1.371628e+08   
4     2012-07-24  300339  23.60  25.52  25.52  23.50    81850  2.034769e+08   
...          ...     ...    ...    ...    ...    ...      ...           ...   
2837  2024-11-06  300339  68.02  67.30  71.23  66.66  1513340  1.036907e+10   
2838  2024-11-07  300339  66.00  68.79  69.95  64.50  1408939  9.423211e+09   
2839  2024-11-08  300339  69.78  71.80  75.50  69.78  1774061  1.297837e+10   
2840  2024-11-11  300339  70.60  75.49  78.00  68.96  1723875  1.274192e+10   
2841  2024-11-12  300339  75.20  73.77  75.49  73.37   269565  2.002645e+09   

         振幅    涨跌幅   涨跌额    换手率  
0     23.49  17.21  3.51  78.67  
1      6.65   0.71  0.17  48.53  
2      3.57   0.50  0.12  31.83  
3      7.48  -4.09 -0.99  31.53  
4      8.71  10.00  2.32  42.65  
...     ...    ...   ...    ...  
2837   6.61  -2.70 -1.87  19.46  
2838   8.10   2.21  1.49  18.12  
2839   8.32   4.38  3.01  22.81  
2840  12.59   5.14  3.69  22.17  
2841   2.81  -2.28 -1.72   3.47  

[2842 rows x 12 columns]
100K线图
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">33</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="n">stocksymb</span><span class="o">=</span><span class="s1">&#39;300339&#39;</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">periods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;daily&#39;</span><span class="p">,</span><span class="s1">&#39;weekly&#39;</span><span class="p">,</span><span class="s1">&#39;monthly&#39;</span><span class="p">]</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">stockDict</span><span class="o">=</span><span class="n">plotDcStocks</span><span class="p">(</span><span class="n">stocksymb</span><span class="p">,</span><span class="n">periods</span><span class="p">)</span>

<span class="nn">Cell In[32], line 35,</span> in <span class="ni">plotDcStocks</span><span class="nt">(stocksymb, periods)</span>
<span class="g g-Whitespace">     </span><span class="mi">33</span>     <span class="n">stockDict</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">=</span><span class="n">stockdf</span>
<span class="g g-Whitespace">     </span><span class="mi">34</span>     <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">stockname</span><span class="si">}</span><span class="s1">-周期：</span><span class="si">{</span><span class="n">p</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">stockdf</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">35</span>     <span class="n">plotDcStockSingle</span><span class="p">(</span><span class="n">stockdf</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">36</span> <span class="n">stockDict</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">stockname</span>
<span class="g g-Whitespace">     </span><span class="mi">37</span> <span class="k">return</span> <span class="n">stockDict</span>

<span class="nn">Cell In[31], line 4,</span> in <span class="ni">plotDcStockSingle</span><span class="nt">(df, days)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">OCHLVDict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;日期&#39;</span><span class="p">:</span><span class="s1">&#39;Date&#39;</span><span class="p">,</span><span class="s1">&#39;开盘&#39;</span><span class="p">:</span><span class="s1">&#39;Open&#39;</span><span class="p">,</span><span class="s1">&#39;收盘&#39;</span><span class="p">:</span><span class="s1">&#39;Close&#39;</span><span class="p">,</span><span class="s1">&#39;最高&#39;</span><span class="p">:</span><span class="s1">&#39;High&#39;</span><span class="p">,</span><span class="s1">&#39;最低&#39;</span><span class="p">:</span><span class="s1">&#39;Low&#39;</span><span class="p">,</span><span class="s1">&#39;成交量&#39;</span><span class="p">:</span><span class="s1">&#39;Volume&#39;</span><span class="p">}</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">days</span><span class="si">}</span><span class="s1">K线图&#39;</span><span class="p">)</span>
<span class="ne">----&gt; </span><span class="mi">4</span> <span class="n">plotStock</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="n">days</span><span class="p">),</span><span class="n">OCHLVDict</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;plotStock&#39; is not defined
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="id12">
<h3>4.1.2 盘口信息汇总<a class="headerlink" href="#id12" title="Link to this heading">#</a></h3>
<section id="id13">
<h4>4.1.2.1 成交和挂单明细<a class="headerlink" href="#id13" title="Link to this heading">#</a></h4>
<p>获取腾讯当日历史分笔数据</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 根据code代码返回“交易所+代码” 信息，或者反过来</span>
<span class="k">def</span> <span class="nf">transferExSym</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">code</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">6</span><span class="p">:</span>
        <span class="n">rescode</span><span class="o">=</span><span class="n">code</span><span class="p">[</span><span class="o">-</span><span class="mi">6</span><span class="p">:]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">source</span><span class="o">=</span><span class="p">{}</span>
        <span class="n">source</span><span class="p">[</span><span class="s1">&#39;sh&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">ak</span><span class="o">.</span><span class="n">stock_sh_a_spot_em</span><span class="p">()[</span><span class="s1">&#39;代码&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        <span class="n">source</span><span class="p">[</span><span class="s1">&#39;sz&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">ak</span><span class="o">.</span><span class="n">stock_sz_a_spot_em</span><span class="p">()[</span><span class="s1">&#39;代码&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        <span class="n">source</span><span class="p">[</span><span class="s1">&#39;bj&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">ak</span><span class="o">.</span><span class="n">stock_bj_a_spot_em</span><span class="p">()[</span><span class="s1">&#39;代码&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">source</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">code</span> <span class="ow">in</span> <span class="n">source</span><span class="p">[</span><span class="n">k</span><span class="p">]:</span>
                <span class="n">rescode</span><span class="o">=</span><span class="n">k</span><span class="o">+</span><span class="n">code</span>
                <span class="k">break</span>
    <span class="k">return</span> <span class="n">rescode</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1">#区分北交所和沪深股市，刻画市场深度。按照涨跌停板，作为极值，按照价格涨幅的measure度量区间</span>
<span class="k">def</span> <span class="nf">priceMarketDepth</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">measure</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>

    <span class="n">open_price</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;成交时间&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;09:30:00&#39;</span><span class="p">,</span> <span class="s1">&#39;成交价格&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># 设置涨跌停板系数</span>
    <span class="k">if</span> <span class="n">stocksymb</span> <span class="o">==</span> <span class="s1">&#39;bj&#39;</span><span class="p">:</span>
        <span class="n">limit_factor</span> <span class="o">=</span> <span class="mf">0.2</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">limit_factor</span> <span class="o">=</span> <span class="mf">0.1</span>

    <span class="c1"># 计算最高价和最低价</span>
    <span class="n">high_price</span> <span class="o">=</span> <span class="n">open_price</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">limit_factor</span><span class="p">)</span>
    <span class="n">low_price</span> <span class="o">=</span> <span class="n">open_price</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">limit_factor</span><span class="p">)</span>

    <span class="c1"># 定义价格区间，每1%一档</span>
    <span class="n">price_bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">low_price</span><span class="p">,</span> <span class="n">high_price</span><span class="p">,</span> <span class="p">(</span><span class="n">high_price</span> <span class="o">-</span> <span class="n">low_price</span><span class="p">)</span> <span class="o">*</span> <span class="n">measure</span><span class="p">),</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># 将价格按照区间划分</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;价格区间&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;成交价格&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">price_bins</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># 按照价格区间汇总成交量</span>
    <span class="n">volume_summary</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;价格区间&#39;</span><span class="p">,</span><span class="n">observed</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="s1">&#39;成交量&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

    <span class="c1"># 新建 df[&#39;prop&#39;] 列</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;prop&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;性质&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="s1">&#39;卖盘&#39;</span> <span class="k">else</span> <span class="p">(</span><span class="mi">1</span> <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="s1">&#39;买盘&#39;</span> <span class="k">else</span> <span class="mi">0</span><span class="p">))</span>
    
    <span class="c1"># 按照价格区间汇总成交量和 prop 之和</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;价格区间&#39;</span><span class="p">,</span><span class="n">observed</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
        <span class="s1">&#39;成交量&#39;</span><span class="p">:</span> <span class="s1">&#39;sum&#39;</span><span class="p">,</span>
        <span class="s1">&#39;prop&#39;</span><span class="p">:</span> <span class="s1">&#39;sum&#39;</span>
    <span class="p">})</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    
    <span class="c1"># 提取价格区间的中点和边界</span>
    <span class="n">summary</span><span class="p">[</span><span class="s1">&#39;价格&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">summary</span><span class="p">[</span><span class="s1">&#39;价格区间&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">mid</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">summary</span><span class="p">[</span><span class="s1">&#39;起始价格&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">summary</span><span class="p">[</span><span class="s1">&#39;价格区间&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">left</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">summary</span><span class="p">[</span><span class="s1">&#39;终止价格&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">summary</span><span class="p">[</span><span class="s1">&#39;价格区间&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">right</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>

    <span class="c1"># 分离买盘和卖盘数据</span>
    <span class="n">summary</span><span class="p">[</span><span class="s1">&#39;买盘深度&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">summary</span><span class="p">[</span><span class="s1">&#39;prop&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">summary</span><span class="p">[</span><span class="s1">&#39;卖盘深度&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;prop&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="o">-</span><span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c1"># 绘制市场深度水平条形图</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">21</span><span class="p">))</span>

    <span class="c1"># 绘制买卖盘深度图</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;价格&#39;</span><span class="p">],</span> <span class="n">summary</span><span class="p">[</span><span class="s1">&#39;买盘深度&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;buy&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;价格&#39;</span><span class="p">],</span> <span class="n">summary</span><span class="p">[</span><span class="s1">&#39;卖盘深度&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;sell&#39;</span><span class="p">)</span>
    
    <span class="c1"># 在图上标注区间价格的起始和终止价格</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">summary</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;买盘深度&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="nb">max</span><span class="p">(</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;买盘深度&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">summary</span><span class="p">[</span><span class="s1">&#39;卖盘深度&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span><span class="o">*</span><span class="n">measure</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;价格&#39;</span><span class="p">],</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;起始价格&quot;</span><span class="p">]</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">-</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;卖盘深度&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="nb">max</span><span class="p">(</span><span class="n">summary</span><span class="p">[</span><span class="s1">&#39;买盘深度&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">summary</span><span class="p">[</span><span class="s1">&#39;卖盘深度&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span><span class="o">*</span><span class="n">measure</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;价格&#39;</span><span class="p">],</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;终止价格&quot;</span><span class="p">]</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>

    <span class="c1"># 设置图表标题和标签</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Market Depth&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Depth(Amount)&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Price&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

    
    <span class="c1"># 显示图表</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    
    <span class="k">return</span> <span class="n">summary</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rich.console</span> <span class="kn">import</span> <span class="n">Console</span>
<span class="kn">from</span> <span class="nn">rich.table</span> <span class="kn">import</span> <span class="n">Table</span>

<span class="c1">#美观显示DataFrame表格</span>
<span class="k">class</span> <span class="nc">DataFramePretty</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">min_max_cols</span><span class="o">=</span><span class="p">[])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">df</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_max_cols</span> <span class="o">=</span> <span class="n">min_max_cols</span>

    <span class="k">def</span> <span class="nf">__set_min_max_style</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
        <span class="n">imax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
        <span class="n">imin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">idxmin</span><span class="p">()</span>

        <span class="n">max_tmpl</span> <span class="o">=</span> <span class="s2">&quot;[b on red3]</span><span class="si">{}</span><span class="s2">[/b on red3]&quot;</span>
        <span class="n">min_tmpl</span> <span class="o">=</span> <span class="s2">&quot;[i on green3]</span><span class="si">{}</span><span class="s2">[/i on green3]&quot;</span>

        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_max_cols</span><span class="p">:</span>
            <span class="n">col_idx</span> <span class="o">=</span> <span class="n">imax</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">imax</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">col_idx</span><span class="p">]</span>
            <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">imax</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">col_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_tmpl</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

            <span class="n">col_idx</span> <span class="o">=</span> <span class="n">imin</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">imin</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">col_idx</span><span class="p">]</span>
            <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">imin</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">col_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_tmpl</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;DataFrame&quot;</span><span class="p">,</span>
            <span class="n">title_style</span><span class="o">=</span><span class="s2">&quot;i on dark_cyan&quot;</span><span class="p">,</span>
            <span class="n">header_style</span><span class="o">=</span><span class="s2">&quot;bold cyan&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># self.data是原始数据</span>
        <span class="c1"># df 是用来显示的数据</span>
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&quot;str&quot;</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__set_min_max_style</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)):</span>
            <span class="n">table</span><span class="o">.</span><span class="n">add_row</span><span class="p">(</span><span class="o">*</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>

        <span class="n">console</span> <span class="o">=</span> <span class="n">Console</span><span class="p">()</span>
        <span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#剔除中性单以后，列出活跃买卖市场深度</span>
<span class="k">def</span> <span class="nf">plotActiveMarketDepth</span><span class="p">(</span><span class="n">stocksymbol</span><span class="p">):</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;市场深度：</span><span class="si">{</span><span class="n">stocksymb</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="c1">#一次性获得历史分笔数据（当天即当天之前的交易时间；隔天即昨天）</span>
    <span class="n">yesterdayTicks</span><span class="o">=</span><span class="n">ak</span><span class="o">.</span><span class="n">stock_zh_a_tick_tx_js</span><span class="p">(</span><span class="n">symbol</span><span class="o">=</span><span class="n">transferExSym</span><span class="p">(</span><span class="n">stocksymb</span><span class="p">))</span>
    
    <span class="n">md</span><span class="o">=</span><span class="n">priceMarketDepth</span><span class="p">(</span><span class="n">yesterdayTicks</span><span class="p">)</span>
    <span class="n">md</span> <span class="o">=</span> <span class="n">md</span><span class="p">[(</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;买盘深度&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">md</span><span class="p">[</span><span class="s1">&#39;卖盘深度&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)]</span>
    <span class="n">mdp</span><span class="o">=</span><span class="n">DataFramePretty</span><span class="p">(</span><span class="n">md</span><span class="p">)</span>
    <span class="n">mdp</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">return</span>  <span class="n">md</span>
</pre></div>
</div>
</div>
</div>
<p>剔除中性盘以后，主动买卖盘的市场深度</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plotActiveMarketDepth</span><span class="p">(</span><span class="n">stocksymb</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="id14">
<h3>4.1.3 个股追踪<a class="headerlink" href="#id14" title="Link to this heading">#</a></h3>
<p>追踪股票列表</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">focusStocks</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;300576&#39;</span><span class="p">,</span><span class="s1">&#39;600839&#39;</span><span class="p">,</span><span class="s1">&#39;600157&#39;</span><span class="p">,</span><span class="s1">&#39;000717&#39;</span><span class="p">,</span><span class="s1">&#39;002607&#39;</span><span class="p">,</span><span class="s1">&#39;600127&#39;</span><span class="p">,</span><span class="s1">&#39;600605&#39;</span><span class="p">,</span><span class="s1">&#39;600217&#39;</span><span class="p">,</span><span class="s1">&#39;300727&#39;</span><span class="p">,</span><span class="s1">&#39;301421&#39;</span><span class="p">,</span><span class="s1">&#39;002843&#39;</span><span class="p">,</span><span class="s1">&#39;600968&#39;</span><span class="p">,</span><span class="s1">&#39;300159&#39;</span><span class="p">,</span><span class="s1">&#39;601688&#39;</span><span class="p">]</span>
<span class="n">getInfo</span><span class="o">=</span><span class="n">getStockInfo</span><span class="p">(</span><span class="n">focusStocks</span><span class="p">)</span>
<span class="n">Analist</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;代码&#39;</span><span class="p">:</span><span class="n">focusStocks</span><span class="p">,</span><span class="s1">&#39;名称&#39;</span><span class="p">:</span><span class="n">getInfo</span><span class="p">[</span><span class="s1">&#39;名称&#39;</span><span class="p">],</span><span class="s1">&#39;IPO&#39;</span><span class="p">:</span><span class="n">getInfo</span><span class="p">[</span><span class="s1">&#39;IPO&#39;</span><span class="p">],</span><span class="s1">&#39;行业&#39;</span><span class="p">:</span><span class="n">getInfo</span><span class="p">[</span><span class="s1">&#39;行业&#39;</span><span class="p">],</span><span class="s1">&#39;流通股&#39;</span><span class="p">:</span><span class="n">getInfo</span><span class="p">[</span><span class="s1">&#39;流通股&#39;</span><span class="p">],</span><span class="s1">&#39;总股本&#39;</span><span class="p">:</span><span class="n">getInfo</span><span class="p">[</span><span class="s1">&#39;总股本&#39;</span><span class="p">]})</span>
<span class="n">Analist</span><span class="p">[</span><span class="s1">&#39;流通股&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">Analist</span><span class="p">[</span><span class="s1">&#39;流通股&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">Analist</span><span class="p">[</span><span class="s1">&#39;总股本&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">Analist</span><span class="p">[</span><span class="s1">&#39;总股本&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">Analist</span><span class="p">[</span><span class="s1">&#39;流通率&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">Analist</span><span class="p">[</span><span class="s1">&#39;流通股&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">Analist</span><span class="p">[</span><span class="s1">&#39;总股本&#39;</span><span class="p">]</span>
<span class="n">Analist</span>
</pre></div>
</div>
</div>
</div>
<p>时序数据库准备</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dolphindb</span> <span class="k">as</span> <span class="nn">ddb</span>
<span class="kn">from</span> <span class="nn">concurrent.futures</span> <span class="kn">import</span> <span class="n">ThreadPoolExecutor</span>
<span class="kn">import</span> <span class="nn">dolphindb.settings</span> <span class="k">as</span> <span class="nn">keys</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">ddb</span><span class="o">.</span><span class="n">session</span><span class="p">(</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span> <span class="mi">8848</span><span class="p">,</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;123456&quot;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;quote_tab = table(1:0, `timestamp`sym`sell_5`sell_5_vol`sell_4`sell_4_vol`sell_3`sell_3_vol`sell_2`sell_2_vol`sell_1`sell_1_vol`buy_1`buy_1_vol`buy_2`buy_2_vol`buy_3`buy_3_vol`buy_4`buy_4_vol`buy_5`buy_5_vol`最新`均价`涨幅`涨跌`总手`金额`换手`量比`最高`最低`今开`昨收`涨停`跌停`外盘`内盘, [TIMESTAMP, SYMBOL, DOUBLE, INT, DOUBLE, INT, DOUBLE, INT, DOUBLE, INT, DOUBLE, INT, DOUBLE, INT, DOUBLE, INT, DOUBLE, INT, DOUBLE, INT, DOUBLE, INT, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE,DOUBLE,DOUBLE])&quot;</span><span class="p">)</span>
<span class="n">quote_tab</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s2">&quot;quote_tab&quot;</span><span class="p">)</span>
<span class="n">dbPath</span><span class="o">=</span><span class="s2">&quot;dfs://quotes&quot;</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">s</span><span class="o">.</span><span class="n">existsDatabase</span><span class="p">(</span><span class="n">dbPath</span><span class="p">):</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">database</span><span class="p">(</span><span class="n">dbPath</span><span class="o">=</span><span class="n">dbPath</span><span class="p">,</span> <span class="n">partitionType</span><span class="o">=</span><span class="n">keys</span><span class="o">.</span><span class="n">LIST</span><span class="p">,</span> <span class="n">partitions</span><span class="o">=</span><span class="n">focusStocks</span><span class="p">,</span><span class="n">engine</span><span class="o">=</span><span class="s1">&#39;TSDB&#39;</span><span class="p">)</span>
    <span class="n">db</span><span class="o">.</span><span class="n">createTable</span><span class="p">(</span><span class="n">quote_tab</span><span class="p">,</span> <span class="s2">&quot;quotes&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;sym&quot;</span><span class="p">])</span>
    
<span class="n">qt</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">dbPath</span><span class="o">=</span><span class="n">dbPath</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="s2">&quot;quotes&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stockCharts</span><span class="p">,</span><span class="n">marketDepths</span><span class="o">=</span><span class="p">{},{}</span>

<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">focusStocks</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">75</span><span class="p">)</span>
    <span class="n">stockCharts</span><span class="p">[</span><span class="n">f</span><span class="p">]</span><span class="o">=</span><span class="n">plotDcStocks</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">periods</span><span class="p">)</span>
    <span class="n">stockname</span><span class="o">=</span><span class="n">stockCharts</span><span class="p">[</span><span class="n">f</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">stockname</span><span class="si">}</span><span class="s1">（</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s1">）的市场深度：&#39;</span><span class="p">)</span>
    <span class="n">marketDepths</span><span class="p">[</span><span class="n">f</span><span class="p">]</span><span class="o">=</span><span class="n">plotActiveMarketDepth</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stock_bid_ask_em_df</span> <span class="o">=</span> <span class="n">ak</span><span class="o">.</span><span class="n">stock_bid_ask_em</span><span class="p">(</span><span class="n">symbol</span><span class="o">=</span><span class="s2">&quot;600839&quot;</span><span class="p">)</span>
<span class="n">stock_bid_ask_em_df</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">akshare</span> <span class="k">as</span> <span class="nn">ak</span>
<span class="kn">import</span> <span class="nn">dolphindb</span> <span class="k">as</span> <span class="nn">ddb</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">concurrent.futures</span> <span class="kn">import</span> <span class="n">ThreadPoolExecutor</span>

<span class="c1"># 初始化 DolphinDB 连接</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">ddb</span><span class="o">.</span><span class="n">session</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span> <span class="mi">8848</span><span class="p">,</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;123456&quot;</span><span class="p">)</span>  <span class="c1"># 替换为实际的主机、端口、用户名和密码</span>

<span class="c1"># 创建 DolphinDB 表</span>
<span class="n">s</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">if (existsDatabase(&quot;dfs://Quote&quot;)) {</span>
<span class="s2">    dropDatabase(&quot;dfs://Quote&quot;)</span>
<span class="s2">}</span>
<span class="s2">t = table(1:0, `timestamp`sym`sell_5`sell_5_vol`sell_4`sell_4_vol`sell_3`sell_3_vol`sell_2`sell_2_vol`sell_1`sell_1_vol`buy_1`buy_1_vol`buy_2`buy_2_vol`buy_3`buy_3_vol`buy_4`buy_4_vol`buy_5`buy_5_vol`最新`均价`涨幅`涨跌`总手`金额`换手`量比`最高`最低`今开`昨收`涨停`跌停`外盘`内盘, [TIMESTAMP, SYMBOL, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE, DOUBLE])</span>
<span class="s2">database(&quot;dfs://Quote&quot;, VALUE, t)</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">is_within_trading_hours</span><span class="p">(</span><span class="n">current_time</span><span class="p">):</span>
    <span class="c1"># 定义交易时间段</span>
    <span class="n">morning_start</span> <span class="o">=</span> <span class="n">current_time</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">morning_end</span> <span class="o">=</span> <span class="n">current_time</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">afternoon_start</span> <span class="o">=</span> <span class="n">current_time</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">afternoon_end</span> <span class="o">=</span> <span class="n">current_time</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="p">(</span><span class="n">morning_start</span> <span class="o">&lt;=</span> <span class="n">current_time</span> <span class="o">&lt;=</span> <span class="n">morning_end</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">afternoon_start</span> <span class="o">&lt;=</span> <span class="n">current_time</span> <span class="o">&lt;=</span> <span class="n">afternoon_end</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">fetch_and_store</span><span class="p">(</span><span class="n">symbol</span><span class="p">):</span>
    <span class="c1"># 获取当前时间</span>
    <span class="n">current_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">is_within_trading_hours</span><span class="p">(</span><span class="n">current_time</span><span class="p">):</span><span class="n">fgggttryy</span>
        <span class="c1"># 获取股票数据</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">ak</span><span class="o">.</span><span class="n">stock_bid_ask_em</span><span class="p">(</span><span class="n">symbol</span><span class="o">=</span><span class="n">symbol</span><span class="p">)</span>

        <span class="c1"># 转换为字典</span>
        <span class="n">data_dict</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;item&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>

        <span class="c1"># 添加时间戳和股票代码到数据字典</span>
        <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">current_time</span>
        <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;sym&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">symbol</span>

        <span class="c1"># 转换数据为 DataFrame</span>
        <span class="n">transformed_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">data_dict</span><span class="p">])</span>

        <span class="c1"># 将数据插入到 DolphinDB</span>
        <span class="n">s</span><span class="o">.</span><span class="n">upload</span><span class="p">({</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">transformed_df</span><span class="p">})</span>
        <span class="n">s</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        append!(loadTable(&quot;dfs://Quote&quot;, &quot;t&quot;), data)</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">)]]</span>
        <span class="p">]</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    
    <span class="c1"># 使用多线程获取多个股票代码的数据</span>
    <span class="k">with</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">focusStocks</span><span class="p">))</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
        <span class="n">executor</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">fetch_and_store</span><span class="p">,</span> <span class="n">focusStocks</span><span class="p">)</span>

    <span class="c1"># 每3秒检查一次</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./20241111/20241111"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">1. 今日板块热点</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">2.2.1 集合竞价概念板块排名</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">2.2.3 开盘后15分钟概念板块排名</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">2.2.3 集合竞价行业板块涨跌幅</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">2.2.4 开盘15分钟行业板块涨跌幅</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">2.2.5 集合竞价阶段涨停个股热点明细</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">2.2.6 开盘15分钟涨停个股热点明细</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">2.2.7 板块动态评析</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">4.个股市场</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">4.1 跟进股票列表</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#k">4.1.1 历史K线</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">4.1.2 盘口信息汇总</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">4.1.2.1 成交和挂单明细</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">4.1.3 个股追踪</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By ugpoor @ Black Widow
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>